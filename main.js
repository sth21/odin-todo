(()=>{"use strict";var e={d:(t,r)=>{for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&(t=r.currentScript.src),!t)){var a=r.getElementsByTagName("script");a.length&&(t=a[a.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.d({},{Z:()=>C});const t={inbox:[],today:[]},r=e.p+"3792aed98a9589656dd4.png",a=e.p+"38c6e851ea03d5118e55.png",n=e.p+"9989a4efa4a9c99c60a3.png",d=e.p+"94441b8e183728b82ae3.png",i=e.p+"596bd58bd36651b3b83d.png",l=e.p+"365ffb192da0ebdf4696.png",c=e.p+"7c89b22bd224bda1bac3.png",o=(()=>{const e=e=>{let t=!1;"add-task-form"!==e.target.getAttribute("id")&&"add-task-form"!==e.target.parentNode.getAttribute("id")&&(t=!0,C.activeTask=C.linkTask(e));let r=document.querySelector("main"),n=document.createElement("div");n.setAttribute("id","overlay");let l=document.createElement("form"),c=document.createElement("div");c.classList.add("header");let s=document.createElement("h2");s.textContent=t?"Edit Task":"Create a New Task",c.appendChild(s);let u=new Image;u.src=d,u.addEventListener("click",o),c.appendChild(u),l.appendChild(c);let p=document.createElement("input");p.setAttribute("type","text"),p.setAttribute("id","title"),p.setAttribute("placeholder","title"),p.setAttribute("name","title"),p.setAttribute("required",""),p.setAttribute("minlength","1"),p.setAttribute("maxlength","26"),t&&(p.value=C.activeTask.title),l.appendChild(p);let g=document.createElement("textarea");g.setAttribute("id","description"),g.setAttribute("placeholder","description"),g.setAttribute("name","description"),g.setAttribute("rows","10"),g.setAttribute("cols","40"),g.setAttribute("required",""),t&&(g.value=C.activeTask.description),l.appendChild(g);let v=document.createElement("input");v.setAttribute("type","date"),v.setAttribute("id","date"),v.setAttribute("name","date"),v.setAttribute("required",""),v.setAttribute("max","9999-12-31"),t&&(v.value=C.activeTask.date),l.appendChild(v);let h=document.createElement("div");h.classList.add("footer");let b=new Image;t&&C.activeTask.priorityStatus?b.src=i:b.src=a,b.addEventListener("click",m),h.appendChild(b);let k=document.createElement("button");k.setAttribute("type","submit"),t?(k.setAttribute("id","edit-task"),k.textContent="Edit Task"):(k.setAttribute("id","add-task"),k.textContent="Add Task"),h.appendChild(k),l.appendChild(h),n.appendChild(l),r.prepend(n)},o=()=>{document.querySelector("#overlay").remove()},s=()=>{document.querySelector("main");let l=document.querySelector("main > h2"),c=t[`${C.activePage}`],o=document.createElement("div");o.setAttribute("id","task"),c[c.length-1].DOMlink=o;let s=document.createElement("div");s.classList.add("left");let p=new Image;p.src=r,p.addEventListener("click",C.removeTask),s.appendChild(p);let m=document.createElement("h3");m.textContent=c[c.length-1].title,s.appendChild(m),o.appendChild(s);let g=document.createElement("div");g.classList.add("right");let v=document.createElement("button");v.setAttribute("id","info"),v.textContent="Info",v.addEventListener("click",u),g.appendChild(v);let h=new Image;!1===c[c.length-1].priorityStatus?h.src=a:h.src=i,h.addEventListener("click",C.togglePriority),g.appendChild(h);let b=new Image;b.src=n,b.addEventListener("click",e),g.appendChild(b);let k=new Image;k.src=d,k.addEventListener("click",C.removeTask),g.appendChild(k),o.appendChild(g),C.activeTask=c[c.length-1],l.parentNode.insertBefore(o,l.nextSibling)},u=e=>{let t=C.linkTask(e),r=document.querySelector("main"),n=document.createElement("div");n.setAttribute("id","overlay");let l=document.createElement("div");l.setAttribute("id","view-task");let c=document.createElement("div");c.classList.add("header");let s=document.createElement("h2");s.textContent=`${t.title}`,c.appendChild(s);let u=new Image;u.src=d,u.addEventListener("click",o),c.appendChild(u),l.appendChild(c);let p=document.createElement("p");p.textContent=`${t.description}`,l.appendChild(p);let m=document.createElement("p");m.textContent=`${t.date}`,l.appendChild(m);let g=new Image;t.priorityStatus?g.src=i:g.src=a,l.appendChild(g),n.appendChild(l),r.prepend(n)},p=e=>{let t=C.activeTask.DOMlink.children[0].children[1],r=C.activeTask.DOMlink.children[1],n=C.activeTask.DOMlink.children[1].children[1];C.activeTask=void 0!==e?e:C.activeTask,t.textContent=C.activeTask.title;let d=new Image;!0===C.activeTask.priorityStatus?d.src=i:d.src=a,d.addEventListener("click",C.togglePriority),r.replaceChild(d,n)},m=e=>{let t=e.target,r=new Image;t.src===a?r.src=i:r.src=a,r.addEventListener("click",C.togglePriority),e.target.parentNode.replaceChild(r,t)};return{removePage:()=>{let e=document.querySelector("body"),t=document.querySelector("main");e.removeChild(t),t=document.createElement("main"),e.appendChild(t)},renderPage:r=>{let a,n=document.querySelector("main"),d=document.createElement("h2");void 0===r?(a=[],d.textContent="inbox"):(a=t[`${C.activePage}`],"P"===r.target.nodeName?d.textContent=r.target.textContent:"IMG"===r.target.nodeName?d.textContent=r.target.nextSibling.textContent:d.textContent=r.target.children[1].textContent),n.appendChild(d);for(let e=0;e<a.length;++e)s(),p(a[e]);let i=document.createElement("div");i.setAttribute("id","add-task-form");let l=new Image;l.src=c,i.appendChild(l);let o=document.createElement("p");o.textContent="Add Task",i.appendChild(o),i.addEventListener("click",e),n.appendChild(i)},renderTaskForm:e,renderProjectForm:()=>{let e=document.querySelector("body"),t=document.createElement("div");t.setAttribute("id","overlay");let r=document.createElement("form");r.classList.add("project-form");let a=document.createElement("div");a.classList.add("header");let n=document.createElement("h2");n.textContent="Add a Project",a.appendChild(n);let i=new Image;i.src=d,i.addEventListener("click",o),a.appendChild(i),r.appendChild(a);let l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("id","project-name"),l.setAttribute("placeholder","project name"),l.setAttribute("name","projectName"),l.setAttribute("required",""),l.setAttribute("minlength","1"),l.setAttribute("maxlength","14"),r.appendChild(l);let c=document.createElement("div");c.classList.add("footer"),c.classList.add("project-footer");let s=document.createElement("button");s.setAttribute("type","submit"),s.textContent="Add Project",c.appendChild(s),r.appendChild(c),t.appendChild(r),e.prepend(t)},deleteForm:o,addProject:()=>{document.querySelector("#projects");let e=document.querySelector("#projects > h2"),t=document.createElement("div");t.classList.add("project");let r=document.createElement("div");r.classList.add("container"),r.addEventListener("click",C.changePage);let a=new Image;a.src=l,r.appendChild(a);let n=document.createElement("p");n.textContent=document.querySelector("form input").value,r.appendChild(n),t.appendChild(r);let i=document.createElement("div");i.classList.add("trash-container"),i.addEventListener("click",C.removeProject);let c=new Image;c.src=d,i.appendChild(c),t.appendChild(i),e.parentNode.insertBefore(t,e.nextSibling)},removeProject:e=>{e.remove()},addTask:s,editTask:p,removeTask:e=>{e.target.parentNode.parentNode.remove()},togglePriority:m}})(),s=o,u=()=>{let e=document.querySelector("#project-name").value;t[`${e}`]=[]},p=()=>{let e=document.querySelector("form input").value,r=Object.keys(t);for(let t=0;t<r.length;++t)if(e===r[t])return!1;return!0},m=()=>{t.today=[];let e=new Date,r=e.getFullYear(),a=e.getMonth()+1;a<10&&(a=`0${a}`);let n=e.getDate();n<10&&(n=`0${n}`);const d=`${r}-${a}-${n}`;let i=Object.values(t),l=[];for(let e=0;e<i.length;++e)l=l.concat(i[e]);let c=l.filter((e=>e.date===d));t.today=c},g=e=>{delete t[`${e}`]},v=()=>{let e=t[`${C.activePage}`],r=document.querySelector("#title").value,n=document.querySelector("#description").value,d=document.querySelector("#date").value,i=document.querySelector(".footer > img");i=i.src!==a,e[e.length]=((e,t,r,a)=>({title:e,description:t,date:r,priorityStatus:a,DOMlink:void 0}))(r,n,d,i)},h=()=>{C.activeTask.title=document.querySelector("#title").value,C.activeTask.description=document.querySelector("#description").value,C.activeTask.date=document.querySelector("#date").value,document.querySelector(".footer > img").src===a?C.activeTask.priorityStatus=!1:C.activeTask.priorityStatus=!0},b=e=>{let r,a,n=t[`${C.activePage}`];for(let t=0;t<n.length;++t)n[t].DOMlink===e.target.parentNode.parentNode&&(r=n[t],a=t);e:if(n===t.today){let e=Object.values(t),a=Object.keys(t);for(let n=0;n<e.length;++n)if(e[n]!==t.today)for(let d=0;d<e[n].length;++d)if(r===e[n][d]){t[a[n]].splice(d,1);break e}}n.splice(a,1)},k=e=>{let t=C.linkTask(e);t.priorityStatus?t.priorityStatus=!1:t.priorityStatus=!0},y=(()=>{const e=e=>{"P"===e.target.nodeName?y.activePage=e.target.textContent:"IMG"===e.target.nodeName?y.activePage=e.target.nextSibling.textContent:y.activePage=e.target.children[1].textContent,s.removePage(),s.renderPage(e)},r=e=>{e.preventDefault(),!1!==p()?(u(),s.addProject(),s.deleteForm()):alert("Name Already Taken By Another Folder. Please Use Another Name.")},a=e=>{e.preventDefault(),h(),s.editTask(),s.deleteForm()},n=e=>{let t=document.querySelector("form button");"add-task"===t.getAttribute("id")?(e=>{e.preventDefault(),v(),s.addTask(),s.deleteForm()})(e):"edit-task"===t.getAttribute("id")?a(e):r(e)};return document.querySelector("#inbox").addEventListener("click",e),document.querySelector("#today").addEventListener("click",(e=>{m(),y.activePage="today",s.removePage(),s.renderPage(e)})),document.querySelector("#add-project-form").addEventListener("click",s.renderProjectForm),document.addEventListener("submit",n),{activePage:"inbox",activeTask:void 0,changePage:e,addProject:r,removeProject:e=>{let t,r;r=e.target.classList.contains(".trash-container")?e.target.previousSibling:e.target.parentNode.previousSibling,t=r.children[1].textContent,r=r.parentNode,g(t),s.removeProject(r),y.activePage===t&&s.removePage()},checkFormPurpose:n,linkTask:e=>{for(let r=0;r<t[`${y.activePage}`].length;++r)if(t[`${y.activePage}`][r].DOMlink===e.target.parentNode.parentNode)return t[`${y.activePage}`][r]},editTask:a,removeTask:e=>{b(e),s.removeTask(e)},togglePriority:e=>{k(e),s.togglePriority(e)}}})();s.renderPage();const C=y})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxXQUN0QixFQUEwQm9HLEdBQzFCLGdCQUFrQnBDLEdBQ2Q2QixFQUFXRSxhQUFlSyxHQUMxQixjQUNKLEVBb0RtRUYsbUJBQWtCSyxTQXBCdkUzRyxJQUNkLElBQUssSUFBSThELEVBQUksRUFBR0EsRUFBSSxFQUFRLEdBQUdtQyxFQUFXRSxjQUFjM0csU0FBVXNFLEVBQzlELEdBQUksRUFBUSxHQUFHbUMsRUFBV0UsY0FBY3JDLEdBQUc1QixVQUFZbEMsRUFBTUUsT0FBT0UsV0FBV0EsV0FDM0UsT0FBTyxFQUFRLEdBQUc2RixFQUFXRSxjQUFjckMsRUFFbkQsRUFlK0ZmLFdBQVV5QixXQXRDekZ4RSxJQUNoQixFQUF1QkEsR0FDdkIsYUFBZUEsRUFBTSxFQW9DZ0cyQixlQWxDakczQixJQUNwQixFQUEyQkEsR0FDM0IsaUJBQW1CQSxFQUFNLEVBaUNoQyxFQWxHa0IsR0FvR25CLGVBRUEsUyIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tdG9kby93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9vZGluLXRvZG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL29kaW4tdG9kby93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL29kaW4tdG9kby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL29kaW4tdG9kby93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9vZGluLXRvZG8vLi9zcmMvbW9kdWxlcy9zdG9yYWdlLmpzIiwid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9tb2R1bGVzL0RPTS5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8vLi9zcmMvbW9kdWxlcy9hcHBsaWNhdGlvbi5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8vLi9zcmMvbW9kdWxlcy90YXNrLmpzIiwid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJjb25zdCBzdG9yYWdlID0gKCgpID0+IHtcbiAgICBsZXQgaW5ib3ggPSBbXTtcbiAgICBsZXQgdG9kYXkgPSBbXTtcblxuICAgIHJldHVybiB7aW5ib3gsIHRvZGF5fVxufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgc3RvcmFnZTsiLCIvLyBNb2R1bGVzXG5pbXBvcnQgY29udHJvbGxlciBmcm9tICcuLi9pbmRleC5qcyc7XG5pbXBvcnQgc3RvcmFnZSBmcm9tICcuL3N0b3JhZ2UuanMnO1xuXG4vLyBNZWRpYVxuaW1wb3J0IGNpcmNsZSBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2NpcmNsZS5wbmcnO1xuaW1wb3J0IHN0YXIgZnJvbSAnLi4vLi4vZGlzdC9tZWRpYS9zdGFyLnBuZyc7XG5pbXBvcnQgZWRpdCBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2VkaXQucG5nJztcbmltcG9ydCByZW1vdmUgZnJvbSAnLi4vLi4vZGlzdC9tZWRpYS9yZW1vdmUucG5nJztcbmltcG9ydCBmdWxsc3RhciBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2Z1bGxzdGFyLnBuZyc7XG5pbXBvcnQgcHJvamVjdGljb24gZnJvbSAnLi4vLi4vZGlzdC9tZWRpYS9wcm9qZWN0cy5wbmcnO1xuaW1wb3J0IGFkZCBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2FkZC5wbmcnO1xuXG5jb25zdCBET00gPSAoKCkgPT4ge1xuICAgIGNvbnN0IHJlbW92ZVBhZ2UgPSAoKSA9PiB7XG4gICAgICAgIGxldCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuICAgICAgICBsZXQgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKTtcbiAgICAgICAgYm9keS5yZW1vdmVDaGlsZChtYWluKTtcbiAgICAgICAgbWFpbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ21haW4nKTtcbiAgICAgICAgYm9keS5hcHBlbmRDaGlsZChtYWluKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbmRlclBhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhc2tMaXN0O1xuICAgICAgICBsZXQgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKTtcbiAgICAgICAgbGV0IHBhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgICAgICBpZiAoZXZlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGFza0xpc3QgPSBbXTtcbiAgICAgICAgICAgIHBhZ2UudGV4dENvbnRlbnQgPSAnaW5ib3gnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFza0xpc3QgPSBzdG9yYWdlW2Ake2NvbnRyb2xsZXIuYWN0aXZlUGFnZX1gXTtcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgPT09ICdQJykge1xuICAgICAgICAgICAgICAgIHBhZ2UudGV4dENvbnRlbnQgPSBldmVudC50YXJnZXQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gJ0lNRycpIHtcbiAgICAgICAgICAgICAgICBwYWdlLnRleHRDb250ZW50ID0gZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nLnRleHRDb250ZW50O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYWdlLnRleHRDb250ZW50ID0gZXZlbnQudGFyZ2V0LmNoaWxkcmVuWzFdLnRleHRDb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbWFpbi5hcHBlbmRDaGlsZChwYWdlKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhc2tMaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBhZGRUYXNrKCk7XG4gICAgICAgICAgICBlZGl0VGFzayh0YXNrTGlzdFtpXSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYWRkVGFza0Zvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgYWRkVGFza0Zvcm0uc2V0QXR0cmlidXRlKCdpZCcsICdhZGQtdGFzay1mb3JtJyk7XG5cbiAgICAgICAgbGV0IGltYWdlMSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZTEuc3JjID0gYWRkO1xuICAgICAgICBhZGRUYXNrRm9ybS5hcHBlbmRDaGlsZChpbWFnZTEpO1xuXG4gICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSAnQWRkIFRhc2snO1xuICAgICAgICBhZGRUYXNrRm9ybS5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cbiAgICAgICAgYWRkVGFza0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW5kZXJUYXNrRm9ybSk7XG4gICAgICAgIG1haW4uYXBwZW5kQ2hpbGQoYWRkVGFza0Zvcm0pO1xuICAgIH07XG4gICAgY29uc3QgcmVuZGVyUHJvamVjdEZvcm0gPSAoKSA9PiB7XG4gICAgICAgIGxldCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuICAgICAgICBcbiAgICAgICAgbGV0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgb3ZlcmxheS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ292ZXJsYXknKTtcblxuICAgICAgICBsZXQgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWZvcm0nKTtcblxuICAgICAgICBsZXQgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdoZWFkZXInKTtcblxuICAgICAgICBsZXQgaGVhZGVyMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgICAgIGhlYWRlcjIudGV4dENvbnRlbnQgPSAnQWRkIGEgUHJvamVjdCc7XG4gICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChoZWFkZXIyKTtcblxuICAgICAgICBsZXQgaW1hZ2UxID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlMS5zcmMgPSByZW1vdmU7XG4gICAgICAgIGltYWdlMS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZUZvcm0pO1xuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoaW1hZ2UxKTtcblxuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGhlYWRlcik7XG5cbiAgICAgICAgbGV0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBuYW1lLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7XG4gICAgICAgIG5hbWUuc2V0QXR0cmlidXRlKCdpZCcsICdwcm9qZWN0LW5hbWUnKTtcbiAgICAgICAgbmFtZS5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ3Byb2plY3QgbmFtZScpO1xuICAgICAgICBuYW1lLnNldEF0dHJpYnV0ZSgnbmFtZScsICdwcm9qZWN0TmFtZScpO1xuICAgICAgICBuYW1lLnNldEF0dHJpYnV0ZSgncmVxdWlyZWQnLCAnJyk7XG4gICAgICAgIG5hbWUuc2V0QXR0cmlidXRlKCdtaW5sZW5ndGgnLCAnMScpO1xuICAgICAgICBuYW1lLnNldEF0dHJpYnV0ZSgnbWF4bGVuZ3RoJywgJzE0Jyk7XG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQobmFtZSk7XG5cbiAgICAgICAgbGV0IGZvb3RlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBmb290ZXIuY2xhc3NMaXN0LmFkZCgnZm9vdGVyJyk7XG4gICAgICAgIGZvb3Rlci5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWZvb3RlcicpO1xuXG4gICAgICAgIGxldCBzdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgc3VibWl0LnNldEF0dHJpYnV0ZSgndHlwZScsICdzdWJtaXQnKTtcbiAgICAgICAgc3VibWl0LnRleHRDb250ZW50ID0gJ0FkZCBQcm9qZWN0JztcbiAgICAgICAgZm9vdGVyLmFwcGVuZENoaWxkKHN1Ym1pdCk7XG5cbiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChmb290ZXIpO1xuXG4gICAgICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cbiAgICAgICAgYm9keS5wcmVwZW5kKG92ZXJsYXkpO1xuICAgIH07XG4gICAgY29uc3QgYWRkUHJvamVjdCA9ICgpID0+IHtcbiAgICAgICAgbGV0IHByb2plY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3RzJyk7XG5cbiAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0cyA+IGgyJyk7XG5cbiAgICAgICAgbGV0IHByb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcHJvamVjdC5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0Jyk7XG5cbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29udGFpbmVyJyk7XG4gICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbnRyb2xsZXIuY2hhbmdlUGFnZSk7XG5cbiAgICAgICAgbGV0IGltYWdlMSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZTEuc3JjID0gcHJvamVjdGljb247XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbWFnZTEpO1xuXG4gICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtIGlucHV0JykudmFsdWU7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cbiAgICAgICAgcHJvamVjdC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXG4gICAgICAgIGxldCB0cmFzaERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0cmFzaERpdi5jbGFzc0xpc3QuYWRkKCd0cmFzaC1jb250YWluZXInKTtcbiAgICAgICAgdHJhc2hEaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjb250cm9sbGVyLnJlbW92ZVByb2plY3QpO1xuXG4gICAgICAgIGxldCB0cmFzaCA9IG5ldyBJbWFnZSgpO1xuICAgICAgICB0cmFzaC5zcmMgPSByZW1vdmU7XG4gICAgICAgIHRyYXNoRGl2LmFwcGVuZENoaWxkKHRyYXNoKTtcblxuICAgICAgICBwcm9qZWN0LmFwcGVuZENoaWxkKHRyYXNoRGl2KTtcblxuICAgICAgICBoZWFkZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocHJvamVjdCwgaGVhZGVyLm5leHRTaWJsaW5nKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVByb2plY3QgPSAoY29udGFpbmVyKSA9PiB7XG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbmRlclRhc2tGb3JtID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBpc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgYnJlYWttZTogaWYgKGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdhZGQtdGFzay1mb3JtJykge1xuICAgICAgICAgICAgYnJlYWsgYnJlYWttZTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdhZGQtdGFzay1mb3JtJykge1xuICAgICAgICAgICAgYnJlYWsgYnJlYWttZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlzRWRpdCA9IHRydWU7XG4gICAgICAgICAgICBjb250cm9sbGVyLmFjdGl2ZVRhc2sgPSBjb250cm9sbGVyLmxpbmtUYXNrKGV2ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpO1xuICAgICAgICBcbiAgICAgICAgbGV0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgb3ZlcmxheS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ292ZXJsYXknKTtcblxuICAgICAgICBsZXQgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcblxuICAgICAgICBsZXQgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdoZWFkZXInKTtcblxuICAgICAgICBsZXQgaGVhZGVyMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgICAgIChpc0VkaXQpID8gaGVhZGVyMi50ZXh0Q29udGVudCA9ICdFZGl0IFRhc2snIDogaGVhZGVyMi50ZXh0Q29udGVudCA9ICdDcmVhdGUgYSBOZXcgVGFzayc7XG4gICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChoZWFkZXIyKTtcblxuICAgICAgICBsZXQgaW1hZ2UxID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlMS5zcmMgPSByZW1vdmU7XG4gICAgICAgIGltYWdlMS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZUZvcm0pO1xuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoaW1hZ2UxKTtcblxuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGhlYWRlcik7XG5cbiAgICAgICAgbGV0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgdGl0bGUuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgICAgICAgdGl0bGUuc2V0QXR0cmlidXRlKCdpZCcsICd0aXRsZScpO1xuICAgICAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ3RpdGxlJyk7XG4gICAgICAgIHRpdGxlLnNldEF0dHJpYnV0ZSgnbmFtZScsICd0aXRsZScpO1xuICAgICAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoJ3JlcXVpcmVkJywgJycpO1xuICAgICAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoJ21pbmxlbmd0aCcsICcxJyk7XG4gICAgICAgIHRpdGxlLnNldEF0dHJpYnV0ZSgnbWF4bGVuZ3RoJywgJzI2Jyk7XG4gICAgICAgIChpc0VkaXQpID8gdGl0bGUudmFsdWUgPSBjb250cm9sbGVyLmFjdGl2ZVRhc2sudGl0bGUgOiB0aXRsZSA9IHRpdGxlO1xuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgICAgICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2Rlc2NyaXB0aW9uJyk7XG4gICAgICAgIGRlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAnZGVzY3JpcHRpb24nKTtcbiAgICAgICAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKCduYW1lJywgJ2Rlc2NyaXB0aW9uJyk7XG4gICAgICAgIGRlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZSgncm93cycsICcxMCcpO1xuICAgICAgICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoJ2NvbHMnLCAnNDAnKTtcbiAgICAgICAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKCdyZXF1aXJlZCcsICcnKTtcbiAgICAgICAgKGlzRWRpdCkgPyBkZXNjcmlwdGlvbi52YWx1ZSA9IGNvbnRyb2xsZXIuYWN0aXZlVGFzay5kZXNjcmlwdGlvbiA6IGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pO1xuXG4gICAgICAgIGxldCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgZGF0ZS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnZGF0ZScpO1xuICAgICAgICBkYXRlLnNldEF0dHJpYnV0ZSgnaWQnLCAnZGF0ZScpO1xuICAgICAgICBkYXRlLnNldEF0dHJpYnV0ZSgnbmFtZScsICdkYXRlJyk7XG4gICAgICAgIGRhdGUuc2V0QXR0cmlidXRlKCdyZXF1aXJlZCcsICcnKTtcbiAgICAgICAgZGF0ZS5zZXRBdHRyaWJ1dGUoJ21heCcsICc5OTk5LTEyLTMxJyk7XG4gICAgICAgIChpc0VkaXQpID8gZGF0ZS52YWx1ZSA9IGNvbnRyb2xsZXIuYWN0aXZlVGFzay5kYXRlIDogZGF0ZSA9IGRhdGU7XG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoZGF0ZSk7XG5cbiAgICAgICAgbGV0IGZvb3RlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBmb290ZXIuY2xhc3NMaXN0LmFkZCgnZm9vdGVyJyk7XG5cbiAgICAgICAgbGV0IGltYWdlMiA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpZiAoaXNFZGl0KSB7XG4gICAgICAgICAgICAoY29udHJvbGxlci5hY3RpdmVUYXNrLnByaW9yaXR5U3RhdHVzKSA/IGltYWdlMi5zcmMgPSBmdWxsc3RhciA6IGltYWdlMi5zcmMgPSBzdGFyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW1hZ2UyLnNyYyA9IHN0YXI7XG4gICAgICAgIH1cbiAgICAgICAgaW1hZ2UyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlUHJpb3JpdHkpO1xuICAgICAgICBmb290ZXIuYXBwZW5kQ2hpbGQoaW1hZ2UyKTtcblxuICAgICAgICBsZXQgc3VibWl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIHN1Ym1pdC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnc3VibWl0Jyk7XG4gICAgICAgIGlmICghaXNFZGl0KSB7XG4gICAgICAgICAgICBzdWJtaXQuc2V0QXR0cmlidXRlKCdpZCcsICdhZGQtdGFzaycpO1xuICAgICAgICAgICAgc3VibWl0LnRleHRDb250ZW50ID0gJ0FkZCBUYXNrJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1Ym1pdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2VkaXQtdGFzaycpO1xuICAgICAgICAgICAgc3VibWl0LnRleHRDb250ZW50ID0gJ0VkaXQgVGFzayc7XG4gICAgICAgIH1cbiAgICAgICAgZm9vdGVyLmFwcGVuZENoaWxkKHN1Ym1pdCk7XG5cbiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChmb290ZXIpO1xuXG4gICAgICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cbiAgICAgICAgbWFpbi5wcmVwZW5kKG92ZXJsYXkpO1xuICAgIH07XG4gICAgY29uc3QgZGVsZXRlRm9ybSA9ICgpID0+IHtcbiAgICAgICAgbGV0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3ZlcmxheScpO1xuICAgICAgICBvdmVybGF5LnJlbW92ZSgpO1xuICAgIH07XG4gICAgY29uc3QgYWRkVGFzayA9ICgpID0+IHtcbiAgICAgICAgbGV0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XG4gICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluID4gaDInKTtcbiAgICAgICAgbGV0IHBhZ2UgPSBzdG9yYWdlW2Ake2NvbnRyb2xsZXIuYWN0aXZlUGFnZX1gXTtcblxuICAgICAgICBsZXQgdGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0YXNrLnNldEF0dHJpYnV0ZSgnaWQnLCAndGFzaycpO1xuICAgICAgICBwYWdlW3BhZ2UubGVuZ3RoIC0gMV0uRE9NbGluayA9IHRhc2s7XG4gICAgICAgIFxuICAgICAgICBsZXQgbGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBsZWZ0LmNsYXNzTGlzdC5hZGQoJ2xlZnQnKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBpbWFnZTEgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1hZ2UxLnNyYyA9IGNpcmNsZTtcbiAgICAgICAgaW1hZ2UxLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY29udHJvbGxlci5yZW1vdmVUYXNrKTtcbiAgICAgICAgbGVmdC5hcHBlbmRDaGlsZChpbWFnZTEpO1xuICAgICAgICBcbiAgICAgICAgbGV0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcbiAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSBwYWdlW3BhZ2UubGVuZ3RoIC0gMV0udGl0bGU7XG4gICAgICAgIGxlZnQuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgICAgIHRhc2suYXBwZW5kQ2hpbGQobGVmdCk7XG5cbiAgICAgICAgbGV0IHJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XG5cbiAgICAgICAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdpZCcsICdpbmZvJyk7XG4gICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdJbmZvJztcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdmlld1Rhc2spO1xuICAgICAgICByaWdodC5hcHBlbmRDaGlsZChidXR0b24pO1xuXG4gICAgICAgIGxldCBpbWFnZTIgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaWYgKHBhZ2VbcGFnZS5sZW5ndGggLSAxXS5wcmlvcml0eVN0YXR1cyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGltYWdlMi5zcmMgPSBzdGFyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW1hZ2UyLnNyYyA9IGZ1bGxzdGFyO1xuICAgICAgICB9XG4gICAgICAgIGltYWdlMi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbnRyb2xsZXIudG9nZ2xlUHJpb3JpdHkpO1xuICAgICAgICByaWdodC5hcHBlbmRDaGlsZChpbWFnZTIpO1xuXG4gICAgICAgIGxldCBpbWFnZTMgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1hZ2UzLnNyYyA9IGVkaXQ7XG4gICAgICAgIGltYWdlMy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbmRlclRhc2tGb3JtKTtcbiAgICAgICAgcmlnaHQuYXBwZW5kQ2hpbGQoaW1hZ2UzKTtcblxuICAgICAgICBsZXQgaW1hZ2U0ID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlNC5zcmMgPSByZW1vdmU7XG4gICAgICAgIGltYWdlNC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbnRyb2xsZXIucmVtb3ZlVGFzayk7XG4gICAgICAgIHJpZ2h0LmFwcGVuZENoaWxkKGltYWdlNCk7XG5cbiAgICAgICAgdGFzay5hcHBlbmRDaGlsZChyaWdodCk7XG5cbiAgICAgICAgY29udHJvbGxlci5hY3RpdmVUYXNrID0gcGFnZVtwYWdlLmxlbmd0aCAtIDFdOyAvLyBBbGxvdyBtZXRob2QgdG8gYmUgdXNlZCB0byByZW5kZXJQYWdlIGFuZCBhZGQgdGFza3NcbiAgICBcbiAgICAgICAgaGVhZGVyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRhc2ssIGhlYWRlci5uZXh0U2libGluZyk7XG4gICAgfTtcblxuICAgIGNvbnN0IHZpZXdUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0YXNrID0gY29udHJvbGxlci5saW5rVGFzayhldmVudCk7XG5cbiAgICAgICAgbGV0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XG4gICAgICAgIFxuICAgICAgICBsZXQgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBvdmVybGF5LnNldEF0dHJpYnV0ZSgnaWQnLCAnb3ZlcmxheScpO1xuXG4gICAgICAgIGxldCB2aWV3Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHZpZXdDb250YWluZXIuc2V0QXR0cmlidXRlKCdpZCcsICd2aWV3LXRhc2snKTtcbiAgICBcbiAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZCgnaGVhZGVyJyk7XG5cbiAgICAgICAgbGV0IGhlYWRlcjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgICAgICBoZWFkZXIyLnRleHRDb250ZW50ID0gYCR7dGFzay50aXRsZX1gO1xuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoaGVhZGVyMik7XG5cbiAgICAgICAgbGV0IGltYWdlMSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZTEuc3JjID0gcmVtb3ZlO1xuICAgICAgICBpbWFnZTEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkZWxldGVGb3JtKTtcbiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGltYWdlMSk7XG5cbiAgICAgICAgdmlld0NvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkZXIpO1xuXG4gICAgICAgIGxldCBkZXRhaWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBkZXRhaWxzLnRleHRDb250ZW50ID0gYCR7dGFzay5kZXNjcmlwdGlvbn1gO1xuICAgICAgICB2aWV3Q29udGFpbmVyLmFwcGVuZENoaWxkKGRldGFpbHMpO1xuXG4gICAgICAgIGxldCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBkYXRlLnRleHRDb250ZW50ID0gYCR7dGFzay5kYXRlfWA7XG4gICAgICAgIHZpZXdDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF0ZSk7XG5cbiAgICAgICAgbGV0IHByaW9yaXR5ID0gbmV3IEltYWdlKCk7XG4gICAgICAgICh0YXNrLnByaW9yaXR5U3RhdHVzKSA/IHByaW9yaXR5LnNyYyA9IGZ1bGxzdGFyIDogcHJpb3JpdHkuc3JjID0gc3RhcjtcbiAgICAgICAgdmlld0NvbnRhaW5lci5hcHBlbmRDaGlsZChwcmlvcml0eSk7XG5cbiAgICAgICAgb3ZlcmxheS5hcHBlbmRDaGlsZCh2aWV3Q29udGFpbmVyKTtcblxuICAgICAgICBtYWluLnByZXBlbmQob3ZlcmxheSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGVkaXRUYXNrID0gKG9iamVjdCkgPT4ge1xuICAgICAgICBsZXQgaGVhZGVyID0gY29udHJvbGxlci5hY3RpdmVUYXNrLkRPTWxpbmsuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV07XG5cbiAgICAgICAgbGV0IHBhcmVudE5vZGUgPSBjb250cm9sbGVyLmFjdGl2ZVRhc2suRE9NbGluay5jaGlsZHJlblsxXTtcblxuICAgICAgICBsZXQgb2xkUHJpb3JpdHkgPSBjb250cm9sbGVyLmFjdGl2ZVRhc2suRE9NbGluay5jaGlsZHJlblsxXS5jaGlsZHJlblsxXTtcblxuICAgICAgICAob2JqZWN0ICE9PSB1bmRlZmluZWQpID8gY29udHJvbGxlci5hY3RpdmVUYXNrID0gb2JqZWN0IDogY29udHJvbGxlci5hY3RpdmVUYXNrID0gY29udHJvbGxlci5hY3RpdmVUYXNrOyAvLyBBbGxvd3MgbWV0aG9kIHRvIGJlIHVzZWQgdG8gcmVuZGVyUGFnZSBhbmQgZWRpdCB0YXNrc1xuICAgICAgICBcbiAgICAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gY29udHJvbGxlci5hY3RpdmVUYXNrLnRpdGxlO1xuXG4gICAgICAgIGxldCBuZXdQcmlvcml0eSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAoY29udHJvbGxlci5hY3RpdmVUYXNrLnByaW9yaXR5U3RhdHVzID09PSB0cnVlKSA/IG5ld1ByaW9yaXR5LnNyYyA9IGZ1bGxzdGFyIDogbmV3UHJpb3JpdHkuc3JjID0gc3RhcjtcbiAgICAgICAgbmV3UHJpb3JpdHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjb250cm9sbGVyLnRvZ2dsZVByaW9yaXR5KTtcbiAgICAgICAgcGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3UHJpb3JpdHksIG9sZFByaW9yaXR5KTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhc2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5yZW1vdmUoKTtcbiAgICB9O1xuXG4gICAgY29uc3QgdG9nZ2xlUHJpb3JpdHkgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IG9sZEVsZW1lbnQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGxldCBuZXdFbGVtZW50ID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGlmIChvbGRFbGVtZW50LnNyYyA9PT0gc3Rhcikge1xuICAgICAgICAgICAgbmV3RWxlbWVudC5zcmMgPSBmdWxsc3RhcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld0VsZW1lbnQuc3JjID0gc3RhcjtcbiAgICAgICAgfVxuICAgICAgICBuZXdFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY29udHJvbGxlci50b2dnbGVQcmlvcml0eSk7XG4gICAgICAgIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdFbGVtZW50LCBvbGRFbGVtZW50KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtyZW1vdmVQYWdlLCByZW5kZXJQYWdlLCByZW5kZXJUYXNrRm9ybSwgcmVuZGVyUHJvamVjdEZvcm0sIGRlbGV0ZUZvcm0sIGFkZFByb2plY3QsIHJlbW92ZVByb2plY3QsIGFkZFRhc2ssIGVkaXRUYXNrLCByZW1vdmVUYXNrLCB0b2dnbGVQcmlvcml0eX07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBET007IiwiaW1wb3J0IGNvbnRyb2xsZXIgZnJvbSAnLi4vaW5kZXguanMnO1xuaW1wb3J0IHN0b3JhZ2UgZnJvbSAnLi9zdG9yYWdlLmpzJztcbmltcG9ydCB0YXNrRmFjdG9yeSBmcm9tICcuL3Rhc2suanMnO1xuaW1wb3J0IERPTSBmcm9tICcuL0RPTS5qcyc7XG5cbi8vIE1lZGlhIEltcG9ydHNcbmltcG9ydCBzdGFyIGZyb20gJy4uLy4uL2Rpc3QvbWVkaWEvc3Rhci5wbmcnO1xuaW1wb3J0IGZ1bGxzdGFyIGZyb20gJy4uLy4uL2Rpc3QvbWVkaWEvZnVsbHN0YXIucG5nJztcblxuY29uc3QgYXBwbGljYXRpb24gPSAoKCkgPT4ge1xuICAgIGNvbnN0IGFkZFByb2plY3QgPSAoKSA9PiB7XG4gICAgICAgIGxldCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0LW5hbWUnKS52YWx1ZVxuICAgICAgICBzdG9yYWdlW2Ake3Byb2plY3ROYW1lfWBdID0gW107XG4gICAgfTtcbiAgICBjb25zdCB2YWxpZGF0ZVByb2plY3ROYW1lID0gKCkgPT4ge1xuICAgICAgICBsZXQgbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0gaW5wdXQnKS52YWx1ZTtcbiAgICAgICAgbGV0IG5hbWVMaXN0ID0gT2JqZWN0LmtleXMoc3RvcmFnZSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZUxpc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChuYW1lID09PSBuYW1lTGlzdFtpXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgY3JlYXRlVG9kYXlBcnJheSA9ICgpID0+IHtcbiAgICAgICAgc3RvcmFnZS50b2RheSA9IFtdO1xuICAgICAgICAvLyBPYnRhaW4gQ3VycmVudCBEYXRlXG4gICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgbGV0IGN1cnJlbnRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICBsZXQgY3VycmVudE1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcbiAgICAgICAgaWYgKGN1cnJlbnRNb250aCA8IDEwKSB7XG4gICAgICAgICAgICBjdXJyZW50TW9udGggPSBgMCR7Y3VycmVudE1vbnRofWA7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN1cnJlbnREYXkgPSBkYXRlLmdldERhdGUoKTtcbiAgICAgICAgaWYgKGN1cnJlbnREYXkgPCAxMCkge1xuICAgICAgICAgICAgY3VycmVudERheSA9IGAwJHtjdXJyZW50RGF5fWA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZnVsbERhdGUgPSBgJHtjdXJyZW50WWVhcn0tJHtjdXJyZW50TW9udGh9LSR7Y3VycmVudERheX1gO1xuXG4gICAgICAgIC8vIE9idGFpbiBldmVyeSBUYXNrIG1hZGVcbiAgICAgICAgbGV0IHByb3BlcnRpZXNMaXN0ID0gT2JqZWN0LnZhbHVlcyhzdG9yYWdlKTtcbiAgICAgICAgbGV0IHRhc2tMaXN0ID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcGVydGllc0xpc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHRhc2tMaXN0ID0gdGFza0xpc3QuY29uY2F0KHByb3BlcnRpZXNMaXN0W2ldKTtcbiAgICAgICAgfSBcblxuICAgICAgICAvLyBGaWx0ZXIgZm9yIFRhc2tzIHRoYXQgZXF1YWwgRGF0ZVxuICAgICAgICBsZXQgZXF1YWxMaXN0ID0gdGFza0xpc3QuZmlsdGVyKHRhc2sgPT4gdGFzay5kYXRlID09PSBmdWxsRGF0ZSk7XG4gICAgICAgIHN0b3JhZ2UudG9kYXkgPSBlcXVhbExpc3Q7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVQcm9qZWN0ID0gKGFycmF5TmFtZSkgPT4ge1xuICAgICAgICBkZWxldGUgc3RvcmFnZVtgJHthcnJheU5hbWV9YF07XG4gICAgfTtcbiAgICBjb25zdCBhZGRUYXNrID0gKCkgPT4ge1xuICAgICAgICBsZXQgcGFnZSA9IHN0b3JhZ2VbYCR7Y29udHJvbGxlci5hY3RpdmVQYWdlfWBdO1xuICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGl0bGUnKS52YWx1ZTtcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Rlc2NyaXB0aW9uJykudmFsdWU7XG4gICAgICAgIGxldCBkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGUnKS52YWx1ZTtcbiAgICAgICAgbGV0IGlzUHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyID4gaW1nJyk7XG4gICAgICAgIGlmIChpc1ByaW9yaXR5LnNyYyA9PT0gc3Rhcikge1xuICAgICAgICAgICAgaXNQcmlvcml0eSA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXNQcmlvcml0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcGFnZVtwYWdlLmxlbmd0aF0gPSB0YXNrRmFjdG9yeSh0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGUsIGlzUHJpb3JpdHkpO1xuICAgIH07XG4gICAgY29uc3QgZWRpdFRhc2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnRyb2xsZXIuYWN0aXZlVGFzay50aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aXRsZScpLnZhbHVlO1xuICAgICAgICBjb250cm9sbGVyLmFjdGl2ZVRhc2suZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKS52YWx1ZTtcbiAgICAgICAgY29udHJvbGxlci5hY3RpdmVUYXNrLmRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZScpLnZhbHVlO1xuICAgICAgICBsZXQgcHJpb3JpdHlTdGF0dXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyID4gaW1nJyk7XG4gICAgICAgIChwcmlvcml0eVN0YXR1cy5zcmMgPT09IHN0YXIpID8gY29udHJvbGxlci5hY3RpdmVUYXNrLnByaW9yaXR5U3RhdHVzID0gZmFsc2UgOiBjb250cm9sbGVyLmFjdGl2ZVRhc2sucHJpb3JpdHlTdGF0dXMgPSB0cnVlO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgcGFnZSA9IHN0b3JhZ2VbYCR7Y29udHJvbGxlci5hY3RpdmVQYWdlfWBdO1xuICAgICAgICBsZXQgdGFzaztcbiAgICAgICAgbGV0IGluZGV4O1xuXG4gICAgICAgIC8vIEZpbmQgcmVsZXZhbnQgdGFza1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2UubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChwYWdlW2ldLkRPTWxpbmsgPT09IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICB0YXNrID0gcGFnZVtpXTtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgYXNzb2NpYXRlZCB0YXNrIGlmIHJlbW92ZWQgd2hpbGUgb24gJ3RvZGF5IHBhZ2UnXG4gICAgICAgIGJyZWFrY29uZDogaWYgKHBhZ2UgPT09IHN0b3JhZ2UudG9kYXkpIHtcbiAgICAgICAgICAgIGxldCBwcm9wZXJ0aWVzTGlzdCA9IE9iamVjdC52YWx1ZXMoc3RvcmFnZSk7XG4gICAgICAgICAgICBsZXQgcHJvcEtleUxpc3QgPSBPYmplY3Qua2V5cyhzdG9yYWdlKTtcbiAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgcHJvcGVydGllc0xpc3QubGVuZ3RoOyArK2spIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc0xpc3Rba10gPT09IHN0b3JhZ2UudG9kYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbSA9IDA7IG0gPCBwcm9wZXJ0aWVzTGlzdFtrXS5sZW5ndGg7ICsrbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhc2sgPT09IHByb3BlcnRpZXNMaXN0W2tdW21dKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZVtwcm9wS2V5TGlzdFtrXV0uc3BsaWNlKG0sIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGJyZWFrY29uZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBcbiAgICAgICAgcGFnZS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH07XG4gICAgY29uc3QgdG9nZ2xlUHJpb3JpdHkgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhc2sgPSBjb250cm9sbGVyLmxpbmtUYXNrKGV2ZW50KTtcbiAgICAgICAgKHRhc2sucHJpb3JpdHlTdGF0dXMpID8gdGFzay5wcmlvcml0eVN0YXR1cyA9IGZhbHNlIDogdGFzay5wcmlvcml0eVN0YXR1cyA9IHRydWU7XG4gICAgfTtcblxuICAgIHJldHVybiB7YWRkUHJvamVjdCx2YWxpZGF0ZVByb2plY3ROYW1lLCBjcmVhdGVUb2RheUFycmF5LCByZW1vdmVQcm9qZWN0LCBhZGRUYXNrLCBlZGl0VGFzaywgcmVtb3ZlVGFzaywgdG9nZ2xlUHJpb3JpdHl9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgYXBwbGljYXRpb247IiwiY29uc3QgdGFza0ZhY3RvcnkgPSAodGl0bGUsIGRlc2NyaXB0aW9uLCBkYXRlLCBpc1ByaW9yaXR5KSA9PiB7XG4gICAgbGV0IERPTWxpbms7XG4gICAgcmV0dXJuIHt0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5U3RhdHVzOiBpc1ByaW9yaXR5LCBET01saW5rfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRhc2tGYWN0b3J5OyIsImltcG9ydCBET00gZnJvbSAnLi9tb2R1bGVzL0RPTS5qcyc7XG5pbXBvcnQgc3RvcmFnZSBmcm9tICcuL21vZHVsZXMvc3RvcmFnZS5qcydcbmltcG9ydCBhcHBsaWNhdGlvbiBmcm9tICcuL21vZHVsZXMvYXBwbGljYXRpb24uanMnO1xuaW1wb3J0IHRhc2tGYWN0b3J5IGZyb20gJy4vbW9kdWxlcy90YXNrLmpzJztcblxuY29uc3QgY29udHJvbGxlciA9ICgoKSA9PiB7XG4gICAgbGV0IGFjdGl2ZVBhZ2UgPSAnaW5ib3gnO1xuICAgIGxldCBhY3RpdmVUYXNrO1xuXG4gICAgY29uc3QgcmVuZGVyVG9kYXlQYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGFwcGxpY2F0aW9uLmNyZWF0ZVRvZGF5QXJyYXkoKTtcbiAgICAgICAgY29udHJvbGxlci5hY3RpdmVQYWdlID0gJ3RvZGF5JztcbiAgICAgICAgRE9NLnJlbW92ZVBhZ2UoKTtcbiAgICAgICAgRE9NLnJlbmRlclBhZ2UoZXZlbnQpO1xuICAgIH1cbiAgICBjb25zdCBjaGFuZ2VQYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgPT09ICdQJykge1xuICAgICAgICAgICAgY29udHJvbGxlci5hY3RpdmVQYWdlID0gZXZlbnQudGFyZ2V0LnRleHRDb250ZW50O1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gJ0lNRycpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYWN0aXZlUGFnZSA9IGV2ZW50LnRhcmdldC5uZXh0U2libGluZy50ZXh0Q29udGVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYWN0aXZlUGFnZSA9IGV2ZW50LnRhcmdldC5jaGlsZHJlblsxXS50ZXh0Q29udGVudDtcbiAgICAgICAgfVxuICAgICAgICBET00ucmVtb3ZlUGFnZSgpO1xuICAgICAgICBET00ucmVuZGVyUGFnZShldmVudCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChhcHBsaWNhdGlvbi52YWxpZGF0ZVByb2plY3ROYW1lKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhbGVydCgnTmFtZSBBbHJlYWR5IFRha2VuIEJ5IEFub3RoZXIgRm9sZGVyLiBQbGVhc2UgVXNlIEFub3RoZXIgTmFtZS4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBcbiAgICAgICAgYXBwbGljYXRpb24uYWRkUHJvamVjdCgpO1xuICAgICAgICBET00uYWRkUHJvamVjdCgpO1xuICAgICAgICBET00uZGVsZXRlRm9ybSgpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlUHJvamVjdCA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgcHJvamVjdEFycmF5O1xuICAgICAgICBsZXQgY29udGFpbmVyO1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnLnRyYXNoLWNvbnRhaW5lcicpKSB7XG4gICAgICAgICAgICBjb250YWluZXIgPSBldmVudC50YXJnZXQucHJldmlvdXNTaWJsaW5nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGFpbmVyID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucHJldmlvdXNTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICAgIHByb2plY3RBcnJheSA9IGNvbnRhaW5lci5jaGlsZHJlblsxXS50ZXh0Q29udGVudDtcbiAgICAgICAgY29udGFpbmVyID0gY29udGFpbmVyLnBhcmVudE5vZGU7XG4gICAgICAgIGFwcGxpY2F0aW9uLnJlbW92ZVByb2plY3QocHJvamVjdEFycmF5KTtcbiAgICAgICAgRE9NLnJlbW92ZVByb2plY3QoY29udGFpbmVyKTtcbiAgICAgICAgaWYgKGNvbnRyb2xsZXIuYWN0aXZlUGFnZSA9PT0gcHJvamVjdEFycmF5KSB7XG4gICAgICAgICAgICBET00ucmVtb3ZlUGFnZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBhZGRUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGFwcGxpY2F0aW9uLmFkZFRhc2soKTtcbiAgICAgICAgRE9NLmFkZFRhc2soKTtcbiAgICAgICAgRE9NLmRlbGV0ZUZvcm0oKTtcbiAgICB9O1xuICAgIGNvbnN0IGVkaXRUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGFwcGxpY2F0aW9uLmVkaXRUYXNrKCk7XG4gICAgICAgIERPTS5lZGl0VGFzaygpO1xuICAgICAgICBET00uZGVsZXRlRm9ybSgpOyBcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhc2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgYXBwbGljYXRpb24ucmVtb3ZlVGFzayhldmVudCk7XG4gICAgICAgIERPTS5yZW1vdmVUYXNrKGV2ZW50KTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVByaW9yaXR5ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGFwcGxpY2F0aW9uLnRvZ2dsZVByaW9yaXR5KGV2ZW50KTtcbiAgICAgICAgRE9NLnRvZ2dsZVByaW9yaXR5KGV2ZW50KTtcbiAgICB9O1xuICAgIGNvbnN0IGNoZWNrRm9ybVB1cnBvc2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0gYnV0dG9uJyk7XG4gICAgICAgIGlmIChidXR0b24uZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnYWRkLXRhc2snKSB7XG4gICAgICAgICAgICBhZGRUYXNrKGV2ZW50KTtcbiAgICAgICAgfSBlbHNlIGlmIChidXR0b24uZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnZWRpdC10YXNrJykge1xuICAgICAgICAgICAgZWRpdFRhc2soZXZlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWRkUHJvamVjdChldmVudCk7XG4gICAgICAgIH1cbiAgICB9IFxuICAgIGNvbnN0IGxpbmtUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RvcmFnZVtgJHtjb250cm9sbGVyLmFjdGl2ZVBhZ2V9YF0ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChzdG9yYWdlW2Ake2NvbnRyb2xsZXIuYWN0aXZlUGFnZX1gXVtpXS5ET01saW5rID09PSBldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JhZ2VbYCR7Y29udHJvbGxlci5hY3RpdmVQYWdlfWBdW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIEV2ZW50IExpc3RlbmVyc1xuICAgIGNvbnN0IGluYm94QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2luYm94Jyk7XG4gICAgaW5ib3hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGFuZ2VQYWdlKTtcblxuICAgIGNvbnN0IHRvZGF5QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZGF5Jyk7XG4gICAgdG9kYXlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW5kZXJUb2RheVBhZ2UpO1xuXG4gICAgY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtcHJvamVjdC1mb3JtJyk7XG4gICAgYWRkUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIERPTS5yZW5kZXJQcm9qZWN0Rm9ybSk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBjaGVja0Zvcm1QdXJwb3NlKTtcblxuICAgIHJldHVybiB7YWN0aXZlUGFnZSwgYWN0aXZlVGFzaywgY2hhbmdlUGFnZSwgYWRkUHJvamVjdCwgcmVtb3ZlUHJvamVjdCwgY2hlY2tGb3JtUHVycG9zZSwgbGlua1Rhc2ssIGVkaXRUYXNrLCByZW1vdmVUYXNrLCB0b2dnbGVQcmlvcml0eX07XG59KSgpO1xuXG5ET00ucmVuZGVyUGFnZSgpO1xuXG5leHBvcnQgZGVmYXVsdCBjb250cm9sbGVyOyJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImxlbmd0aCIsIkVycm9yIiwicmVwbGFjZSIsInAiLCJpbmJveCIsInRvZGF5IiwiRE9NIiwicmVuZGVyVGFza0Zvcm0iLCJldmVudCIsImlzRWRpdCIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsInBhcmVudE5vZGUiLCJtYWluIiwicXVlcnlTZWxlY3RvciIsIm92ZXJsYXkiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiZm9ybSIsImhlYWRlciIsImNsYXNzTGlzdCIsImFkZCIsImhlYWRlcjIiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwiaW1hZ2UxIiwiSW1hZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwiZGVsZXRlRm9ybSIsInRpdGxlIiwidmFsdWUiLCJkZXNjcmlwdGlvbiIsImRhdGUiLCJmb290ZXIiLCJpbWFnZTIiLCJ0b2dnbGVQcmlvcml0eSIsInN1Ym1pdCIsInByZXBlbmQiLCJyZW1vdmUiLCJhZGRUYXNrIiwicGFnZSIsInRhc2siLCJET01saW5rIiwibGVmdCIsInJpZ2h0IiwiYnV0dG9uIiwidmlld1Rhc2siLCJwcmlvcml0eVN0YXR1cyIsImltYWdlMyIsImltYWdlNCIsImluc2VydEJlZm9yZSIsIm5leHRTaWJsaW5nIiwidmlld0NvbnRhaW5lciIsImRldGFpbHMiLCJwcmlvcml0eSIsImVkaXRUYXNrIiwib2JqZWN0Iiwib2xkUHJpb3JpdHkiLCJ1bmRlZmluZWQiLCJuZXdQcmlvcml0eSIsInJlcGxhY2VDaGlsZCIsIm9sZEVsZW1lbnQiLCJuZXdFbGVtZW50IiwicmVtb3ZlUGFnZSIsImJvZHkiLCJyZW1vdmVDaGlsZCIsInJlbmRlclBhZ2UiLCJ0YXNrTGlzdCIsIm5vZGVOYW1lIiwiY2hpbGRyZW4iLCJpIiwiYWRkVGFza0Zvcm0iLCJyZW5kZXJQcm9qZWN0Rm9ybSIsIm5hbWUiLCJhZGRQcm9qZWN0IiwicHJvamVjdCIsImNvbnRhaW5lciIsInRyYXNoRGl2IiwidHJhc2giLCJyZW1vdmVQcm9qZWN0IiwicmVtb3ZlVGFzayIsInByb2plY3ROYW1lIiwibmFtZUxpc3QiLCJrZXlzIiwiRGF0ZSIsImN1cnJlbnRZZWFyIiwiZ2V0RnVsbFllYXIiLCJjdXJyZW50TW9udGgiLCJnZXRNb250aCIsImN1cnJlbnREYXkiLCJnZXREYXRlIiwiZnVsbERhdGUiLCJwcm9wZXJ0aWVzTGlzdCIsInZhbHVlcyIsImNvbmNhdCIsImVxdWFsTGlzdCIsImZpbHRlciIsImFycmF5TmFtZSIsImlzUHJpb3JpdHkiLCJpbmRleCIsImJyZWFrY29uZCIsInByb3BLZXlMaXN0IiwiayIsIm0iLCJzcGxpY2UiLCJjb250cm9sbGVyIiwiY2hhbmdlUGFnZSIsImFjdGl2ZVBhZ2UiLCJwcmV2ZW50RGVmYXVsdCIsImFsZXJ0IiwiY2hlY2tGb3JtUHVycG9zZSIsImFjdGl2ZVRhc2siLCJwcm9qZWN0QXJyYXkiLCJjb250YWlucyIsInByZXZpb3VzU2libGluZyIsImxpbmtUYXNrIl0sInNvdXJjZVJvb3QiOiIifQ==