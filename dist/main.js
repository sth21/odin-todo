(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&(t=r.currentScript.src),!t)){var n=r.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.d({},{Z:()=>b});const t={inbox:[],today:[]},r=e.p+"3792aed98a9589656dd4.png",n=e.p+"38c6e851ea03d5118e55.png",d=e.p+"9989a4efa4a9c99c60a3.png",i=e.p+"94441b8e183728b82ae3.png",a=e.p+"596bd58bd36651b3b83d.png",o=e.p+"365ffb192da0ebdf4696.png",c=(()=>{const e=e=>{let t=!1;"add-task-form"!==e.target.getAttribute("id")&&"add-task-form"!==e.target.parentNode.getAttribute("id")&&(t=!0,b.activeTask=b.linkTask(e));let r=document.querySelector("main"),d=document.createElement("div");d.setAttribute("id","overlay");let o=document.createElement("form"),l=document.createElement("div");l.classList.add("header");let p=document.createElement("h2");p.textContent=t?"Edit Task":"Create a New Task",l.appendChild(p);let u=new Image;u.src=i,u.addEventListener("click",c),l.appendChild(u),o.appendChild(l);let m=document.createElement("input");m.setAttribute("type","text"),m.setAttribute("id","title"),m.setAttribute("placeholder","title"),m.setAttribute("name","title"),m.setAttribute("required",""),t&&(m.value=b.activeTask.title),o.appendChild(m);let v=document.createElement("textarea");v.setAttribute("id","description"),v.setAttribute("placeholder","description"),v.setAttribute("name","description"),v.setAttribute("rows","10"),v.setAttribute("cols","40"),v.setAttribute("required",""),t&&(v.value=b.activeTask.description),o.appendChild(v);let h=document.createElement("input");h.setAttribute("type","date"),h.setAttribute("id","date"),h.setAttribute("name","date"),h.setAttribute("required",""),t&&(h.value=b.activeTask.date),o.appendChild(h);let k=document.createElement("div");k.classList.add("footer");let g=new Image;t&&b.activeTask.priorityStatus?g.src=a:g.src=n,g.addEventListener("click",s),k.appendChild(g);let y=document.createElement("button");y.setAttribute("type","submit"),t?(y.setAttribute("id","edit-task"),y.textContent="Edit Task"):(y.setAttribute("id","add-task"),y.textContent="Add Task"),k.appendChild(y),o.appendChild(k),d.appendChild(o),r.prepend(d)},c=()=>{document.querySelector("#overlay").remove()},l=e=>{let t=b.linkTask(e),r=document.querySelector("main"),d=document.createElement("div");d.setAttribute("id","overlay");let o=document.createElement("div");o.setAttribute("id","view-task");let l=document.createElement("div");l.classList.add("header");let s=document.createElement("h2");s.textContent=`${t.title}`,l.appendChild(s);let p=new Image;p.src=i,p.addEventListener("click",c),l.appendChild(p),o.appendChild(l);let u=document.createElement("p");u.textContent=`${t.description}`,o.appendChild(u);let m=document.createElement("p");m.textContent=`${t.date}`,o.appendChild(m);let v=new Image;t.priorityStatus?v.src=a:v.src=n,o.appendChild(v),d.appendChild(o),r.prepend(d)},s=e=>{let t=e.target,r=new Image;t.src===n?r.src=a:r.src=n,r.addEventListener("click",b.togglePriority),e.target.parentNode.replaceChild(r,t)};return{renderPage:()=>{},renderTaskForm:e,renderProjectForm:()=>{let e=document.querySelector("body"),t=document.createElement("div");t.setAttribute("id","overlay");let r=document.createElement("form");r.classList.add("project-form");let n=document.createElement("div");n.classList.add("header");let d=document.createElement("h2");d.textContent="Add a Project",n.appendChild(d);let a=new Image;a.src=i,a.addEventListener("click",c),n.appendChild(a),r.appendChild(n);let o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("id","project-name"),o.setAttribute("placeholder","project name"),o.setAttribute("name","projectName"),o.setAttribute("required",""),r.appendChild(o);let l=document.createElement("div");l.classList.add("footer"),l.classList.add("project-footer");let s=document.createElement("button");s.setAttribute("type","submit"),s.textContent="Add Project",l.appendChild(s),r.appendChild(l),t.appendChild(r),e.prepend(t)},deleteForm:c,addProject:()=>{document.querySelector("#projects");let e=document.querySelector("#projects > h2"),t=document.createElement("div");t.classList.add("container");let r=new Image;r.src=o,t.appendChild(r);let n=document.createElement("p");n.textContent=document.querySelector("form input").value,t.appendChild(n),e.parentNode.insertBefore(t,e.nextSibling)},removeProject:()=>{},addTask:()=>{document.querySelector("main");let o=document.querySelector("main > h2"),c=document.createElement("div");c.setAttribute("id","task"),t.inbox[t.inbox.length-1].DOMlink=c;let s=document.createElement("div");s.classList.add("left");let p=new Image;p.src=r,p.addEventListener("click",b.removeTask),s.appendChild(p);let u=document.createElement("h3");u.textContent=t.inbox[t.inbox.length-1].title,s.appendChild(u),c.appendChild(s);let m=document.createElement("div");m.classList.add("right");let v=document.createElement("button");v.setAttribute("id","info"),v.textContent="Info",v.addEventListener("click",l),m.appendChild(v);let h=new Image;!1===t.inbox[t.inbox.length-1].priorityStatus?h.src=n:h.src=a,h.addEventListener("click",b.togglePriority),m.appendChild(h);let k=new Image;k.src=d,k.addEventListener("click",e),m.appendChild(k);let g=new Image;g.src=i,g.addEventListener("click",b.removeTask),m.appendChild(g),c.appendChild(m),o.parentNode.insertBefore(c,o.nextSibling)},editTask:()=>{b.activeTask.DOMlink.children[0].children[1].textContent=b.activeTask.title;let e=b.activeTask.DOMlink.children[1],t=b.activeTask.DOMlink.children[1].children[1],r=new Image;!0===b.activeTask.priorityStatus?r.src=a:r.src=n,r.addEventListener("click",b.togglePriority),e.replaceChild(r,t)},removeTask:e=>{e.target.parentNode.parentNode.remove()},togglePriority:s}})(),l=c,s=()=>{let e=document.querySelector("#project-name").value;t[`${e}`]=[]},p=()=>{let e=document.querySelector("#title").value,r=document.querySelector("#description").value,d=document.querySelector("#date").value,i=document.querySelector(".footer > img");i=i.src!==n,t.inbox[t.inbox.length]=((e,t,r,n)=>({title:e,description:t,date:r,priorityStatus:n,DOMlink:void 0}))(e,r,d,i)},u=()=>{b.activeTask.title=document.querySelector("#title").value,b.activeTask.description=document.querySelector("#description").value,b.activeTask.date=document.querySelector("#date").value,document.querySelector(".footer > img").src===n?b.activeTask.priorityStatus=!1:b.activeTask.priorityStatus=!0},m=e=>{for(let r=0;r<t.inbox.length;++r)t.inbox[r].DOMlink===e.target.parentNode.parentNode&&t.inbox.splice(r,1)},v=e=>{let t=b.linkTask(e);t.priorityStatus?t.priorityStatus=!1:t.priorityStatus=!0},b=(()=>{const e=e=>{e.preventDefault(),s(),l.addProject(),l.deleteForm()},r=e=>{e.preventDefault(),u(),l.editTask(),l.deleteForm()},n=t=>{let n=document.querySelector("form button");"add-task"===n.getAttribute("id")?(e=>{e.preventDefault(),p(),l.addTask(),l.deleteForm()})(t):"edit-task"===n.getAttribute("id")?r(t):e(t)};return document.querySelector("#add-project-form").addEventListener("click",l.renderProjectForm),document.querySelector("#add-task-form").addEventListener("click",l.renderTaskForm),document.addEventListener("submit",n),{activeTask:void 0,addProject:e,removeProject:()=>{},checkFormPurpose:n,linkTask:e=>{for(let r=0;r<t.inbox.length;++r)if(t.inbox[r].DOMlink===e.target.parentNode.parentNode)return t.inbox[r]},editTask:r,removeTask:e=>{m(e),l.removeTask(e)},togglePriority:e=>{v(e),l.togglePriority(e)}}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUEyQkEsR0FDM0IsaUJBQW1CQSxFQUFNLEVBOEJoQyxFQTNEa0IsRSIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tdG9kby93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9vZGluLXRvZG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL29kaW4tdG9kby93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL29kaW4tdG9kby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL29kaW4tdG9kby93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9vZGluLXRvZG8vLi9zcmMvbW9kdWxlcy9zdG9yYWdlLmpzIiwid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9tb2R1bGVzL0RPTS5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8vLi9zcmMvbW9kdWxlcy9hcHBsaWNhdGlvbi5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8vLi9zcmMvbW9kdWxlcy90YXNrLmpzIiwid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJjb25zdCBzdG9yYWdlID0gKCgpID0+IHtcbiAgICBsZXQgaW5ib3ggPSBbXTtcbiAgICBsZXQgdG9kYXkgPSBbXTtcblxuICAgIHJldHVybiB7aW5ib3gsIHRvZGF5fVxufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgc3RvcmFnZTsiLCIvLyBNb2R1bGVzXG5pbXBvcnQgY29udHJvbGxlciBmcm9tICcuLi9pbmRleC5qcyc7XG5pbXBvcnQgc3RvcmFnZSBmcm9tICcuL3N0b3JhZ2UuanMnO1xuXG4vLyBNZWRpYVxuaW1wb3J0IGNpcmNsZSBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2NpcmNsZS5wbmcnO1xuaW1wb3J0IHN0YXIgZnJvbSAnLi4vLi4vZGlzdC9tZWRpYS9zdGFyLnBuZyc7XG5pbXBvcnQgZWRpdCBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2VkaXQucG5nJztcbmltcG9ydCByZW1vdmUgZnJvbSAnLi4vLi4vZGlzdC9tZWRpYS9yZW1vdmUucG5nJztcbmltcG9ydCBmdWxsc3RhciBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2Z1bGxzdGFyLnBuZyc7XG5pbXBvcnQgcHJvamVjdCBmcm9tICcuLi8uLi9kaXN0L21lZGlhL3Byb2plY3RzLnBuZyc7XG5cbmNvbnN0IERPTSA9ICgoKSA9PiB7XG4gICAgY29uc3QgcmVuZGVyUGFnZSA9ICgpID0+IHtcblxuICAgIH07XG4gICAgY29uc3QgcmVuZGVyUHJvamVjdEZvcm0gPSAoKSA9PiB7XG4gICAgICAgIGxldCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuICAgICAgICBcbiAgICAgICAgbGV0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgb3ZlcmxheS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ292ZXJsYXknKTtcblxuICAgICAgICBsZXQgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWZvcm0nKTtcblxuICAgICAgICBsZXQgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdoZWFkZXInKTtcblxuICAgICAgICBsZXQgaGVhZGVyMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgICAgIGhlYWRlcjIudGV4dENvbnRlbnQgPSAnQWRkIGEgUHJvamVjdCc7XG4gICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChoZWFkZXIyKTtcblxuICAgICAgICBsZXQgaW1hZ2UxID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlMS5zcmMgPSByZW1vdmU7XG4gICAgICAgIGltYWdlMS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZUZvcm0pO1xuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoaW1hZ2UxKTtcblxuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGhlYWRlcik7XG5cbiAgICAgICAgbGV0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBuYW1lLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7XG4gICAgICAgIG5hbWUuc2V0QXR0cmlidXRlKCdpZCcsICdwcm9qZWN0LW5hbWUnKTtcbiAgICAgICAgbmFtZS5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ3Byb2plY3QgbmFtZScpO1xuICAgICAgICBuYW1lLnNldEF0dHJpYnV0ZSgnbmFtZScsICdwcm9qZWN0TmFtZScpO1xuICAgICAgICBuYW1lLnNldEF0dHJpYnV0ZSgncmVxdWlyZWQnLCAnJyk7XG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQobmFtZSk7XG5cbiAgICAgICAgbGV0IGZvb3RlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBmb290ZXIuY2xhc3NMaXN0LmFkZCgnZm9vdGVyJyk7XG4gICAgICAgIGZvb3Rlci5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWZvb3RlcicpO1xuXG4gICAgICAgIGxldCBzdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgc3VibWl0LnNldEF0dHJpYnV0ZSgndHlwZScsICdzdWJtaXQnKTtcbiAgICAgICAgc3VibWl0LnRleHRDb250ZW50ID0gJ0FkZCBQcm9qZWN0JztcbiAgICAgICAgZm9vdGVyLmFwcGVuZENoaWxkKHN1Ym1pdCk7XG5cbiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChmb290ZXIpO1xuXG4gICAgICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cbiAgICAgICAgYm9keS5wcmVwZW5kKG92ZXJsYXkpO1xuICAgIH07XG4gICAgY29uc3QgYWRkUHJvamVjdCA9ICgpID0+IHtcbiAgICAgICAgbGV0IHByb2plY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3RzJyk7XG5cbiAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0cyA+IGgyJyk7XG5cbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29udGFpbmVyJyk7XG5cbiAgICAgICAgbGV0IGltYWdlMSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZTEuc3JjID0gcHJvamVjdDtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGltYWdlMSk7XG5cbiAgICAgICAgbGV0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0gaW5wdXQnKS52YWx1ZTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICAgICAgICBoZWFkZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY29udGFpbmVyLCBoZWFkZXIubmV4dFNpYmxpbmcpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlUHJvamVjdCA9ICgpID0+IHtcblxuICAgIH07XG4gICAgY29uc3QgcmVuZGVyVGFza0Zvcm0gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IGlzRWRpdCA9IGZhbHNlO1xuICAgICAgICBicmVha21lOiBpZiAoZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2FkZC10YXNrLWZvcm0nKSB7XG4gICAgICAgICAgICBicmVhayBicmVha21lO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2FkZC10YXNrLWZvcm0nKSB7XG4gICAgICAgICAgICBicmVhayBicmVha21lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXNFZGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYWN0aXZlVGFzayA9IGNvbnRyb2xsZXIubGlua1Rhc2soZXZlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XG4gICAgICAgIFxuICAgICAgICBsZXQgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBvdmVybGF5LnNldEF0dHJpYnV0ZSgnaWQnLCAnb3ZlcmxheScpO1xuXG4gICAgICAgIGxldCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuXG4gICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoJ2hlYWRlcicpO1xuXG4gICAgICAgIGxldCBoZWFkZXIyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcbiAgICAgICAgKGlzRWRpdCkgPyBoZWFkZXIyLnRleHRDb250ZW50ID0gJ0VkaXQgVGFzaycgOiBoZWFkZXIyLnRleHRDb250ZW50ID0gJ0NyZWF0ZSBhIE5ldyBUYXNrJztcbiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGhlYWRlcjIpO1xuXG4gICAgICAgIGxldCBpbWFnZTEgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1hZ2UxLnNyYyA9IHJlbW92ZTtcbiAgICAgICAgaW1hZ2UxLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVsZXRlRm9ybSk7XG4gICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChpbWFnZTEpO1xuXG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoaGVhZGVyKTtcblxuICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuICAgICAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RpdGxlJyk7XG4gICAgICAgIHRpdGxlLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAndGl0bGUnKTtcbiAgICAgICAgdGl0bGUuc2V0QXR0cmlidXRlKCduYW1lJywgJ3RpdGxlJyk7XG4gICAgICAgIHRpdGxlLnNldEF0dHJpYnV0ZSgncmVxdWlyZWQnLCAnJyk7XG4gICAgICAgIChpc0VkaXQpID8gdGl0bGUudmFsdWUgPSBjb250cm9sbGVyLmFjdGl2ZVRhc2sudGl0bGUgOiB0aXRsZSA9IHRpdGxlO1xuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgICAgICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2Rlc2NyaXB0aW9uJyk7XG4gICAgICAgIGRlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAnZGVzY3JpcHRpb24nKTtcbiAgICAgICAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKCduYW1lJywgJ2Rlc2NyaXB0aW9uJyk7XG4gICAgICAgIGRlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZSgncm93cycsICcxMCcpO1xuICAgICAgICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoJ2NvbHMnLCAnNDAnKTtcbiAgICAgICAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKCdyZXF1aXJlZCcsICcnKTtcbiAgICAgICAgKGlzRWRpdCkgPyBkZXNjcmlwdGlvbi52YWx1ZSA9IGNvbnRyb2xsZXIuYWN0aXZlVGFzay5kZXNjcmlwdGlvbiA6IGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pO1xuXG4gICAgICAgIGxldCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgZGF0ZS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnZGF0ZScpO1xuICAgICAgICBkYXRlLnNldEF0dHJpYnV0ZSgnaWQnLCAnZGF0ZScpO1xuICAgICAgICBkYXRlLnNldEF0dHJpYnV0ZSgnbmFtZScsICdkYXRlJyk7XG4gICAgICAgIGRhdGUuc2V0QXR0cmlidXRlKCdyZXF1aXJlZCcsICcnKTtcbiAgICAgICAgKGlzRWRpdCkgPyBkYXRlLnZhbHVlID0gY29udHJvbGxlci5hY3RpdmVUYXNrLmRhdGUgOiBkYXRlID0gZGF0ZTtcbiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChkYXRlKTtcblxuICAgICAgICBsZXQgZm9vdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGZvb3Rlci5jbGFzc0xpc3QuYWRkKCdmb290ZXInKTtcblxuICAgICAgICBsZXQgaW1hZ2UyID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGlmIChpc0VkaXQpIHtcbiAgICAgICAgICAgIChjb250cm9sbGVyLmFjdGl2ZVRhc2sucHJpb3JpdHlTdGF0dXMpID8gaW1hZ2UyLnNyYyA9IGZ1bGxzdGFyIDogaW1hZ2UyLnNyYyA9IHN0YXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbWFnZTIuc3JjID0gc3RhcjtcbiAgICAgICAgfVxuICAgICAgICBpbWFnZTIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVQcmlvcml0eSk7XG4gICAgICAgIGZvb3Rlci5hcHBlbmRDaGlsZChpbWFnZTIpO1xuXG4gICAgICAgIGxldCBzdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgc3VibWl0LnNldEF0dHJpYnV0ZSgndHlwZScsICdzdWJtaXQnKTtcbiAgICAgICAgaWYgKCFpc0VkaXQpIHtcbiAgICAgICAgICAgIHN1Ym1pdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FkZC10YXNrJyk7XG4gICAgICAgICAgICBzdWJtaXQudGV4dENvbnRlbnQgPSAnQWRkIFRhc2snO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3VibWl0LnNldEF0dHJpYnV0ZSgnaWQnLCAnZWRpdC10YXNrJyk7XG4gICAgICAgICAgICBzdWJtaXQudGV4dENvbnRlbnQgPSAnRWRpdCBUYXNrJztcbiAgICAgICAgfVxuICAgICAgICBmb290ZXIuYXBwZW5kQ2hpbGQoc3VibWl0KTtcblxuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGZvb3Rlcik7XG5cbiAgICAgICAgb3ZlcmxheS5hcHBlbmRDaGlsZChmb3JtKTtcblxuICAgICAgICBtYWluLnByZXBlbmQob3ZlcmxheSk7XG4gICAgfTtcbiAgICBjb25zdCBkZWxldGVGb3JtID0gKCkgPT4ge1xuICAgICAgICBsZXQgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvdmVybGF5Jyk7XG4gICAgICAgIG92ZXJsYXkucmVtb3ZlKCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRUYXNrID0gKCkgPT4ge1xuICAgICAgICBsZXQgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKTtcbiAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4gPiBoMicpO1xuXG4gICAgICAgIGxldCB0YXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRhc2suc2V0QXR0cmlidXRlKCdpZCcsICd0YXNrJyk7XG4gICAgICAgIHN0b3JhZ2UuaW5ib3hbc3RvcmFnZS5pbmJveC5sZW5ndGggLSAxXS5ET01saW5rID0gdGFzaztcbiAgICAgICAgXG4gICAgICAgIGxldCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGxlZnQuY2xhc3NMaXN0LmFkZCgnbGVmdCcpO1xuICAgICAgICBcbiAgICAgICAgbGV0IGltYWdlMSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZTEuc3JjID0gY2lyY2xlO1xuICAgICAgICBpbWFnZTEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjb250cm9sbGVyLnJlbW92ZVRhc2spO1xuICAgICAgICBsZWZ0LmFwcGVuZENoaWxkKGltYWdlMSk7XG4gICAgICAgIFxuICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IHN0b3JhZ2UuaW5ib3hbc3RvcmFnZS5pbmJveC5sZW5ndGggLSAxXS50aXRsZTtcbiAgICAgICAgbGVmdC5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cbiAgICAgICAgdGFzay5hcHBlbmRDaGlsZChsZWZ0KTtcblxuICAgICAgICBsZXQgcmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcmlnaHQuY2xhc3NMaXN0LmFkZCgncmlnaHQnKTtcblxuICAgICAgICBsZXQgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2luZm8nKTtcbiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ0luZm8nO1xuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB2aWV3VGFzayk7XG4gICAgICAgIHJpZ2h0LmFwcGVuZENoaWxkKGJ1dHRvbik7XG5cbiAgICAgICAgbGV0IGltYWdlMiA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpZiAoc3RvcmFnZS5pbmJveFtzdG9yYWdlLmluYm94Lmxlbmd0aCAtIDFdLnByaW9yaXR5U3RhdHVzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaW1hZ2UyLnNyYyA9IHN0YXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbWFnZTIuc3JjID0gZnVsbHN0YXI7XG4gICAgICAgIH1cbiAgICAgICAgaW1hZ2UyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY29udHJvbGxlci50b2dnbGVQcmlvcml0eSk7XG4gICAgICAgIHJpZ2h0LmFwcGVuZENoaWxkKGltYWdlMik7XG5cbiAgICAgICAgbGV0IGltYWdlMyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZTMuc3JjID0gZWRpdDtcbiAgICAgICAgaW1hZ2UzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVuZGVyVGFza0Zvcm0pO1xuICAgICAgICByaWdodC5hcHBlbmRDaGlsZChpbWFnZTMpO1xuXG4gICAgICAgIGxldCBpbWFnZTQgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1hZ2U0LnNyYyA9IHJlbW92ZTtcbiAgICAgICAgaW1hZ2U0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY29udHJvbGxlci5yZW1vdmVUYXNrKTtcbiAgICAgICAgcmlnaHQuYXBwZW5kQ2hpbGQoaW1hZ2U0KTtcblxuICAgICAgICB0YXNrLmFwcGVuZENoaWxkKHJpZ2h0KTtcblxuICAgICAgICBoZWFkZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGFzaywgaGVhZGVyLm5leHRTaWJsaW5nKTtcbiAgICB9O1xuXG4gICAgY29uc3Qgdmlld1Rhc2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhc2sgPSBjb250cm9sbGVyLmxpbmtUYXNrKGV2ZW50KTtcblxuICAgICAgICBsZXQgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIG92ZXJsYXkuc2V0QXR0cmlidXRlKCdpZCcsICdvdmVybGF5Jyk7XG5cbiAgICAgICAgbGV0IHZpZXdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdmlld0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3ZpZXctdGFzaycpO1xuICAgIFxuICAgICAgICBsZXQgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdoZWFkZXInKTtcblxuICAgICAgICBsZXQgaGVhZGVyMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgICAgIGhlYWRlcjIudGV4dENvbnRlbnQgPSBgJHt0YXNrLnRpdGxlfWA7XG4gICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChoZWFkZXIyKTtcblxuICAgICAgICBsZXQgaW1hZ2UxID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlMS5zcmMgPSByZW1vdmU7XG4gICAgICAgIGltYWdlMS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZUZvcm0pO1xuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoaW1hZ2UxKTtcblxuICAgICAgICB2aWV3Q29udGFpbmVyLmFwcGVuZENoaWxkKGhlYWRlcik7XG5cbiAgICAgICAgbGV0IGRldGFpbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGRldGFpbHMudGV4dENvbnRlbnQgPSBgJHt0YXNrLmRlc2NyaXB0aW9ufWA7XG4gICAgICAgIHZpZXdDb250YWluZXIuYXBwZW5kQ2hpbGQoZGV0YWlscyk7XG5cbiAgICAgICAgbGV0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGRhdGUudGV4dENvbnRlbnQgPSBgJHt0YXNrLmRhdGV9YDtcbiAgICAgICAgdmlld0NvbnRhaW5lci5hcHBlbmRDaGlsZChkYXRlKTtcblxuICAgICAgICBsZXQgcHJpb3JpdHkgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgKHRhc2sucHJpb3JpdHlTdGF0dXMpID8gcHJpb3JpdHkuc3JjID0gZnVsbHN0YXIgOiBwcmlvcml0eS5zcmMgPSBzdGFyO1xuICAgICAgICB2aWV3Q29udGFpbmVyLmFwcGVuZENoaWxkKHByaW9yaXR5KTtcblxuICAgICAgICBvdmVybGF5LmFwcGVuZENoaWxkKHZpZXdDb250YWluZXIpO1xuXG4gICAgICAgIG1haW4ucHJlcGVuZChvdmVybGF5KTtcbiAgICB9O1xuXG4gICAgY29uc3QgZWRpdFRhc2sgPSAoKSA9PiB7XG4gICAgICAgIGxldCBoZWFkZXIgPSBjb250cm9sbGVyLmFjdGl2ZVRhc2suRE9NbGluay5jaGlsZHJlblswXS5jaGlsZHJlblsxXTtcbiAgICAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gY29udHJvbGxlci5hY3RpdmVUYXNrLnRpdGxlO1xuXG4gICAgICAgIGxldCBwYXJlbnROb2RlID0gY29udHJvbGxlci5hY3RpdmVUYXNrLkRPTWxpbmsuY2hpbGRyZW5bMV07XG5cbiAgICAgICAgbGV0IG9sZFByaW9yaXR5ID0gY29udHJvbGxlci5hY3RpdmVUYXNrLkRPTWxpbmsuY2hpbGRyZW5bMV0uY2hpbGRyZW5bMV07XG5cbiAgICAgICAgbGV0IG5ld1ByaW9yaXR5ID0gbmV3IEltYWdlKCk7XG4gICAgICAgIChjb250cm9sbGVyLmFjdGl2ZVRhc2sucHJpb3JpdHlTdGF0dXMgPT09IHRydWUpID8gbmV3UHJpb3JpdHkuc3JjID0gZnVsbHN0YXIgOiBuZXdQcmlvcml0eS5zcmMgPSBzdGFyO1xuICAgICAgICBuZXdQcmlvcml0eS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbnRyb2xsZXIudG9nZ2xlUHJpb3JpdHkpO1xuICAgICAgICBwYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdQcmlvcml0eSwgb2xkUHJpb3JpdHkpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgcmVtb3ZhbCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICAgIHJlbW92YWwucmVtb3ZlKCk7XG4gICAgfTtcblxuICAgIGNvbnN0IHRvZ2dsZVByaW9yaXR5ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBvbGRFbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBsZXQgbmV3RWxlbWVudCA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpZiAob2xkRWxlbWVudC5zcmMgPT09IHN0YXIpIHtcbiAgICAgICAgICAgIG5ld0VsZW1lbnQuc3JjID0gZnVsbHN0YXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXdFbGVtZW50LnNyYyA9IHN0YXI7XG4gICAgICAgIH1cbiAgICAgICAgbmV3RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbnRyb2xsZXIudG9nZ2xlUHJpb3JpdHkpO1xuICAgICAgICBldmVudC50YXJnZXQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3RWxlbWVudCwgb2xkRWxlbWVudCk7XG4gICAgfTtcblxuICAgIHJldHVybiB7cmVuZGVyUGFnZSwgcmVuZGVyVGFza0Zvcm0sIHJlbmRlclByb2plY3RGb3JtLCBkZWxldGVGb3JtLCBhZGRQcm9qZWN0LCByZW1vdmVQcm9qZWN0LCBhZGRUYXNrLCBlZGl0VGFzaywgcmVtb3ZlVGFzaywgdG9nZ2xlUHJpb3JpdHl9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgRE9NOyIsImltcG9ydCBjb250cm9sbGVyIGZyb20gJy4uL2luZGV4LmpzJztcbmltcG9ydCBzdG9yYWdlIGZyb20gJy4vc3RvcmFnZS5qcyc7XG5pbXBvcnQgdGFza0ZhY3RvcnkgZnJvbSAnLi90YXNrLmpzJztcbmltcG9ydCBET00gZnJvbSAnLi9ET00uanMnO1xuXG4vLyBNZWRpYSBJbXBvcnRzXG5pbXBvcnQgc3RhciBmcm9tICcuLi8uLi9kaXN0L21lZGlhL3N0YXIucG5nJztcbmltcG9ydCBmdWxsc3RhciBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2Z1bGxzdGFyLnBuZyc7XG5cbmNvbnN0IGFwcGxpY2F0aW9uID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gKCkgPT4ge1xuICAgICAgICBsZXQgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdC1uYW1lJykudmFsdWVcbiAgICAgICAgc3RvcmFnZVtgJHtwcm9qZWN0TmFtZX1gXSA9IFtdO1xuICAgIH07XG4gICAgY29uc3QgYWRkTG9jYXRpb24gPSAoKSA9PiB7XG5cbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVByb2plY3QgPSAoKSA9PiB7XG5cbiAgICB9O1xuICAgIGNvbnN0IGFkZFRhc2sgPSAoKSA9PiB7XG4gICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aXRsZScpLnZhbHVlO1xuICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKS52YWx1ZTtcbiAgICAgICAgbGV0IGRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZScpLnZhbHVlO1xuICAgICAgICBsZXQgaXNQcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXIgPiBpbWcnKTtcbiAgICAgICAgaWYgKGlzUHJpb3JpdHkuc3JjID09PSBzdGFyKSB7XG4gICAgICAgICAgICBpc1ByaW9yaXR5ID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpc1ByaW9yaXR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBzdG9yYWdlLmluYm94W3N0b3JhZ2UuaW5ib3gubGVuZ3RoXSA9IHRhc2tGYWN0b3J5KHRpdGxlLCBkZXNjcmlwdGlvbiwgZGF0ZSwgaXNQcmlvcml0eSk7XG4gICAgfTtcbiAgICBjb25zdCBlZGl0VGFzayA9ICgpID0+IHtcbiAgICAgICAgY29udHJvbGxlci5hY3RpdmVUYXNrLnRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpdGxlJykudmFsdWU7XG4gICAgICAgIGNvbnRyb2xsZXIuYWN0aXZlVGFzay5kZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZXNjcmlwdGlvbicpLnZhbHVlO1xuICAgICAgICBjb250cm9sbGVyLmFjdGl2ZVRhc2suZGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJykudmFsdWU7XG4gICAgICAgIGxldCBwcmlvcml0eVN0YXR1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXIgPiBpbWcnKTtcbiAgICAgICAgKHByaW9yaXR5U3RhdHVzLnNyYyA9PT0gc3RhcikgPyBjb250cm9sbGVyLmFjdGl2ZVRhc2sucHJpb3JpdHlTdGF0dXMgPSBmYWxzZSA6IGNvbnRyb2xsZXIuYWN0aXZlVGFzay5wcmlvcml0eVN0YXR1cyA9IHRydWU7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RvcmFnZS5pbmJveC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKHN0b3JhZ2UuaW5ib3hbaV0uRE9NbGluayA9PT0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgIHN0b3JhZ2UuaW5ib3guc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVQcmlvcml0eSA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgdGFzayA9IGNvbnRyb2xsZXIubGlua1Rhc2soZXZlbnQpO1xuICAgICAgICAodGFzay5wcmlvcml0eVN0YXR1cykgPyB0YXNrLnByaW9yaXR5U3RhdHVzID0gZmFsc2UgOiB0YXNrLnByaW9yaXR5U3RhdHVzID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHthZGRQcm9qZWN0LCBhZGRMb2NhdGlvbiwgcmVtb3ZlUHJvamVjdCwgYWRkVGFzaywgZWRpdFRhc2ssIHJlbW92ZVRhc2ssIHRvZ2dsZVByaW9yaXR5fTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGFwcGxpY2F0aW9uOyIsImNvbnN0IHRhc2tGYWN0b3J5ID0gKHRpdGxlLCBkZXNjcmlwdGlvbiwgZGF0ZSwgaXNQcmlvcml0eSkgPT4ge1xuICAgIGxldCBET01saW5rO1xuICAgIHJldHVybiB7dGl0bGUsIGRlc2NyaXB0aW9uLCBkYXRlLCBwcmlvcml0eVN0YXR1czogaXNQcmlvcml0eSwgRE9NbGlua307XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0YXNrRmFjdG9yeTsiLCJpbXBvcnQgRE9NIGZyb20gJy4vbW9kdWxlcy9ET00uanMnO1xuaW1wb3J0IHN0b3JhZ2UgZnJvbSAnLi9tb2R1bGVzL3N0b3JhZ2UuanMnXG5pbXBvcnQgYXBwbGljYXRpb24gZnJvbSAnLi9tb2R1bGVzL2FwcGxpY2F0aW9uLmpzJztcbmltcG9ydCB0YXNrRmFjdG9yeSBmcm9tICcuL21vZHVsZXMvdGFzay5qcyc7XG5cbmNvbnN0IGNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICAgIGxldCBhY3RpdmVUYXNrO1xuICAgIGNvbnN0IGFkZFByb2plY3QgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgYXBwbGljYXRpb24uYWRkUHJvamVjdCgpO1xuICAgICAgICBET00uYWRkUHJvamVjdCgpO1xuICAgICAgICBET00uZGVsZXRlRm9ybSgpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlUHJvamVjdCA9ICgpID0+IHtcblxuICAgIH07XG4gICAgY29uc3QgYWRkVGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhcHBsaWNhdGlvbi5hZGRUYXNrKCk7XG4gICAgICAgIERPTS5hZGRUYXNrKCk7XG4gICAgICAgIERPTS5kZWxldGVGb3JtKCk7XG4gICAgfTtcbiAgICBjb25zdCBlZGl0VGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhcHBsaWNhdGlvbi5lZGl0VGFzaygpO1xuICAgICAgICBET00uZWRpdFRhc2soKTtcbiAgICAgICAgRE9NLmRlbGV0ZUZvcm0oKTsgXG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGFwcGxpY2F0aW9uLnJlbW92ZVRhc2soZXZlbnQpO1xuICAgICAgICBET00ucmVtb3ZlVGFzayhldmVudCk7XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVQcmlvcml0eSA9IChldmVudCkgPT4ge1xuICAgICAgICBhcHBsaWNhdGlvbi50b2dnbGVQcmlvcml0eShldmVudCk7XG4gICAgICAgIERPTS50b2dnbGVQcmlvcml0eShldmVudCk7XG4gICAgfTtcbiAgICBjb25zdCBjaGVja0Zvcm1QdXJwb3NlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtIGJ1dHRvbicpO1xuICAgICAgICBpZiAoYnV0dG9uLmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2FkZC10YXNrJykge1xuICAgICAgICAgICAgYWRkVGFzayhldmVudCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uLmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2VkaXQtdGFzaycpIHtcbiAgICAgICAgICAgIGVkaXRUYXNrKGV2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFkZFByb2plY3QoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfSBcbiAgICBjb25zdCBsaW5rVGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0b3JhZ2UuaW5ib3gubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChzdG9yYWdlLmluYm94W2ldLkRPTWxpbmsgPT09IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmFnZS5pbmJveFtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBFdmVudCBMaXN0ZW5lcnNcbiAgICBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1wcm9qZWN0LWZvcm0nKTtcbiAgICBhZGRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgRE9NLnJlbmRlclByb2plY3RGb3JtKTtcblxuICAgIGNvbnN0IGFkZFRhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLXRhc2stZm9ybScpO1xuICAgIGFkZFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBET00ucmVuZGVyVGFza0Zvcm0pO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgY2hlY2tGb3JtUHVycG9zZSk7XG5cbiAgICByZXR1cm4ge2FjdGl2ZVRhc2ssIGFkZFByb2plY3QsIHJlbW92ZVByb2plY3QsIGNoZWNrRm9ybVB1cnBvc2UsIGxpbmtUYXNrLCBlZGl0VGFzaywgcmVtb3ZlVGFzaywgdG9nZ2xlUHJpb3JpdHl9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgY29udHJvbGxlcjsiXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJkb2N1bWVudCIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsZW5ndGgiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwiaW5ib3giLCJ0b2RheSIsIkRPTSIsInJlbmRlclRhc2tGb3JtIiwiZXZlbnQiLCJpc0VkaXQiLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJwYXJlbnROb2RlIiwibWFpbiIsInF1ZXJ5U2VsZWN0b3IiLCJvdmVybGF5IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImZvcm0iLCJoZWFkZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJoZWFkZXIyIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImltYWdlMSIsIkltYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRlbGV0ZUZvcm0iLCJ0aXRsZSIsInZhbHVlIiwiZGVzY3JpcHRpb24iLCJkYXRlIiwiZm9vdGVyIiwiaW1hZ2UyIiwidG9nZ2xlUHJpb3JpdHkiLCJzdWJtaXQiLCJwcmVwZW5kIiwicmVtb3ZlIiwidmlld1Rhc2siLCJ0YXNrIiwidmlld0NvbnRhaW5lciIsImRldGFpbHMiLCJwcmlvcml0eSIsIm9sZEVsZW1lbnQiLCJuZXdFbGVtZW50IiwicmVwbGFjZUNoaWxkIiwicmVuZGVyUGFnZSIsInJlbmRlclByb2plY3RGb3JtIiwiYm9keSIsIm5hbWUiLCJhZGRQcm9qZWN0IiwiY29udGFpbmVyIiwiaW5zZXJ0QmVmb3JlIiwibmV4dFNpYmxpbmciLCJyZW1vdmVQcm9qZWN0IiwiYWRkVGFzayIsIkRPTWxpbmsiLCJsZWZ0IiwicmlnaHQiLCJidXR0b24iLCJwcmlvcml0eVN0YXR1cyIsImltYWdlMyIsImltYWdlNCIsImVkaXRUYXNrIiwib2xkUHJpb3JpdHkiLCJuZXdQcmlvcml0eSIsInJlbW92ZVRhc2siLCJwcm9qZWN0TmFtZSIsImlzUHJpb3JpdHkiLCJpIiwicHJldmVudERlZmF1bHQiLCJjaGVja0Zvcm1QdXJwb3NlIiwiYWN0aXZlVGFzayIsImxpbmtUYXNrIl0sInNvdXJjZVJvb3QiOiIifQ==