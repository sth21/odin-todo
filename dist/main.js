(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&(t=r.currentScript.src),!t)){var n=r.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.d({},{Z:()=>b});const t={inbox:[],today:[]},r=e.p+"3792aed98a9589656dd4.png",n=e.p+"38c6e851ea03d5118e55.png",a=e.p+"9989a4efa4a9c99c60a3.png",d=e.p+"94441b8e183728b82ae3.png",i=e.p+"596bd58bd36651b3b83d.png",c=e.p+"365ffb192da0ebdf4696.png",l=e.p+"7c89b22bd224bda1bac3.png",o=(()=>{const e=e=>{let t=!1;"add-task-form"!==e.target.getAttribute("id")&&"add-task-form"!==e.target.parentNode.getAttribute("id")&&(t=!0,b.activeTask=b.linkTask(e));let r=document.querySelector("main"),a=document.createElement("div");a.setAttribute("id","overlay");let c=document.createElement("form"),l=document.createElement("div");l.classList.add("header");let s=document.createElement("h2");s.textContent=t?"Edit Task":"Create a New Task",l.appendChild(s);let p=new Image;p.src=d,p.addEventListener("click",o),l.appendChild(p),c.appendChild(l);let u=document.createElement("input");u.setAttribute("type","text"),u.setAttribute("id","title"),u.setAttribute("placeholder","title"),u.setAttribute("name","title"),u.setAttribute("required",""),t&&(u.value=b.activeTask.title),c.appendChild(u);let v=document.createElement("textarea");v.setAttribute("id","description"),v.setAttribute("placeholder","description"),v.setAttribute("name","description"),v.setAttribute("rows","10"),v.setAttribute("cols","40"),v.setAttribute("required",""),t&&(v.value=b.activeTask.description),c.appendChild(v);let g=document.createElement("input");g.setAttribute("type","date"),g.setAttribute("id","date"),g.setAttribute("name","date"),g.setAttribute("required",""),t&&(g.value=b.activeTask.date),c.appendChild(g);let h=document.createElement("div");h.classList.add("footer");let k=new Image;t&&b.activeTask.priorityStatus?k.src=i:k.src=n,k.addEventListener("click",m),h.appendChild(k);let C=document.createElement("button");C.setAttribute("type","submit"),t?(C.setAttribute("id","edit-task"),C.textContent="Edit Task"):(C.setAttribute("id","add-task"),C.textContent="Add Task"),h.appendChild(C),c.appendChild(h),a.appendChild(c),r.prepend(a)},o=()=>{document.querySelector("#overlay").remove()},s=()=>{document.querySelector("main");let c=document.querySelector("main > h2"),l=t[`${b.activePage}`],o=document.createElement("div");o.setAttribute("id","task"),l[l.length-1].DOMlink=o;let s=document.createElement("div");s.classList.add("left");let u=new Image;u.src=r,u.addEventListener("click",b.removeTask),s.appendChild(u);let m=document.createElement("h3");m.textContent=l[l.length-1].title,s.appendChild(m),o.appendChild(s);let v=document.createElement("div");v.classList.add("right");let g=document.createElement("button");g.setAttribute("id","info"),g.textContent="Info",g.addEventListener("click",p),v.appendChild(g);let h=new Image;!1===l[l.length-1].priorityStatus?h.src=n:h.src=i,h.addEventListener("click",b.togglePriority),v.appendChild(h);let k=new Image;k.src=a,k.addEventListener("click",e),v.appendChild(k);let C=new Image;C.src=d,C.addEventListener("click",b.removeTask),v.appendChild(C),o.appendChild(v),b.activeTask=l[l.length-1],c.parentNode.insertBefore(o,c.nextSibling)},p=e=>{let t=b.linkTask(e),r=document.querySelector("main"),a=document.createElement("div");a.setAttribute("id","overlay");let c=document.createElement("div");c.setAttribute("id","view-task");let l=document.createElement("div");l.classList.add("header");let s=document.createElement("h2");s.textContent=`${t.title}`,l.appendChild(s);let p=new Image;p.src=d,p.addEventListener("click",o),l.appendChild(p),c.appendChild(l);let u=document.createElement("p");u.textContent=`${t.description}`,c.appendChild(u);let m=document.createElement("p");m.textContent=`${t.date}`,c.appendChild(m);let v=new Image;t.priorityStatus?v.src=i:v.src=n,c.appendChild(v),a.appendChild(c),r.prepend(a)},u=e=>{let t=b.activeTask.DOMlink.children[0].children[1],r=b.activeTask.DOMlink.children[1],a=b.activeTask.DOMlink.children[1].children[1];b.activeTask=void 0!==e?e:b.activeTask,t.textContent=b.activeTask.title;let d=new Image;!0===b.activeTask.priorityStatus?d.src=i:d.src=n,d.addEventListener("click",b.togglePriority),r.replaceChild(d,a)},m=e=>{let t=e.target,r=new Image;t.src===n?r.src=i:r.src=n,r.addEventListener("click",b.togglePriority),e.target.parentNode.replaceChild(r,t)};return{removePage:()=>{let e=document.querySelector("body"),t=document.querySelector("main");e.removeChild(t),t=document.createElement("main"),e.appendChild(t)},renderPage:r=>{let n,a=document.querySelector("main"),d=document.createElement("h2");void 0===r?(n=[],d.textContent="inbox"):(n=t[`${b.activePage}`],"P"===r.target.nodeName?d.textContent=r.target.textContent:"IMG"===r.target.nodeName?d.textContent=r.target.nextSibling.textContent:d.textContent=r.target.children[1].textContent),a.appendChild(d);for(let e=0;e<n.length;++e)s(),u(n[e]);let i=document.createElement("div");i.setAttribute("id","add-task-form");let c=new Image;c.src=l,i.appendChild(c);let o=document.createElement("p");o.textContent="Add Task",i.appendChild(o),i.addEventListener("click",e),a.appendChild(i)},renderTaskForm:e,renderProjectForm:()=>{let e=document.querySelector("body"),t=document.createElement("div");t.setAttribute("id","overlay");let r=document.createElement("form");r.classList.add("project-form");let n=document.createElement("div");n.classList.add("header");let a=document.createElement("h2");a.textContent="Add a Project",n.appendChild(a);let i=new Image;i.src=d,i.addEventListener("click",o),n.appendChild(i),r.appendChild(n);let c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("id","project-name"),c.setAttribute("placeholder","project name"),c.setAttribute("name","projectName"),c.setAttribute("required",""),r.appendChild(c);let l=document.createElement("div");l.classList.add("footer"),l.classList.add("project-footer");let s=document.createElement("button");s.setAttribute("type","submit"),s.textContent="Add Project",l.appendChild(s),r.appendChild(l),t.appendChild(r),e.prepend(t)},deleteForm:o,addProject:()=>{document.querySelector("#projects");let e=document.querySelector("#projects > h2"),t=document.createElement("div");t.classList.add("project");let r=document.createElement("div");r.classList.add("container"),r.addEventListener("click",b.changePage);let n=new Image;n.src=c,r.appendChild(n);let a=document.createElement("p");a.textContent=document.querySelector("form input").value,r.appendChild(a),t.appendChild(r);let i=document.createElement("div");i.classList.add("trash-container"),i.addEventListener("click",b.removeProject);let l=new Image;l.src=d,i.appendChild(l),t.appendChild(i),e.parentNode.insertBefore(t,e.nextSibling)},removeProject:e=>{e.remove()},addTask:s,editTask:u,removeTask:e=>{e.target.parentNode.parentNode.remove()},togglePriority:m}})(),s=o,p=()=>{let e=document.querySelector("#project-name").value;t[`${e}`]=[]},u=e=>{delete t[`${e}`]},m=()=>{let e=t[`${b.activePage}`],r=document.querySelector("#title").value,a=document.querySelector("#description").value,d=document.querySelector("#date").value,i=document.querySelector(".footer > img");i=i.src!==n,e[e.length]=((e,t,r,n)=>({title:e,description:t,date:r,priorityStatus:n,DOMlink:void 0}))(r,a,d,i)},v=()=>{b.activeTask.title=document.querySelector("#title").value,b.activeTask.description=document.querySelector("#description").value,b.activeTask.date=document.querySelector("#date").value,document.querySelector(".footer > img").src===n?b.activeTask.priorityStatus=!1:b.activeTask.priorityStatus=!0},g=e=>{let r=t[`${b.activePage}`];for(let t=0;t<r.length;++t)r[t].DOMlink===e.target.parentNode.parentNode&&r.splice(t,1)},h=e=>{let t=b.linkTask(e);t.priorityStatus?t.priorityStatus=!1:t.priorityStatus=!0},k=(()=>{const e=e=>{"P"===e.target.nodeName?k.activePage=e.target.textContent:"IMG"===e.target.nodeName?k.activePage=e.target.nextSibling.textContent:k.activePage=e.target.children[1].textContent,s.removePage(),s.renderPage(e)},r=e=>{e.preventDefault(),p(),s.addProject(),s.deleteForm()},n=e=>{e.preventDefault(),v(),s.editTask(),s.deleteForm()},a=e=>{let t=document.querySelector("form button");"add-task"===t.getAttribute("id")?(e=>{e.preventDefault(),m(),s.addTask(),s.deleteForm()})(e):"edit-task"===t.getAttribute("id")?n(e):r(e)};return document.querySelector("#inbox").addEventListener("click",e),document.querySelector("#add-project-form").addEventListener("click",s.renderProjectForm),document.addEventListener("submit",a),{activePage:"inbox",activeTask:void 0,changePage:e,addProject:r,removeProject:e=>{let t,r;r=e.target.classList.contains(".trash-container")?e.target.previousSibling:e.target.parentNode.previousSibling,t=r.children[1].textContent,r=r.parentNode,u(t),s.removeProject(r)},checkFormPurpose:a,linkTask:e=>{for(let r=0;r<t[`${k.activePage}`].length;++r)if(t[`${k.activePage}`][r].DOMlink===e.target.parentNode.parentNode)return t[`${k.activePage}`][r]},editTask:n,removeTask:e=>{g(e),s.removeTask(e)},togglePriority:e=>{h(e),s.togglePriority(e)}}})();s.renderPage();const b=k})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxFQWlDZ0cyQixlQS9CakczQixJQUNwQixFQUEyQkEsR0FDM0IsaUJBQW1CQSxFQUFNLEVBOEJoQyxFQWxGa0IsR0FvRm5CLGVBRUEsUyIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tdG9kby93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9vZGluLXRvZG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL29kaW4tdG9kby93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL29kaW4tdG9kby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL29kaW4tdG9kby93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9vZGluLXRvZG8vLi9zcmMvbW9kdWxlcy9zdG9yYWdlLmpzIiwid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9tb2R1bGVzL0RPTS5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8vLi9zcmMvbW9kdWxlcy9hcHBsaWNhdGlvbi5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8vLi9zcmMvbW9kdWxlcy90YXNrLmpzIiwid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJjb25zdCBzdG9yYWdlID0gKCgpID0+IHtcbiAgICBsZXQgaW5ib3ggPSBbXTtcbiAgICBsZXQgdG9kYXkgPSBbXTtcblxuICAgIHJldHVybiB7aW5ib3gsIHRvZGF5fVxufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgc3RvcmFnZTsiLCIvLyBNb2R1bGVzXG5pbXBvcnQgY29udHJvbGxlciBmcm9tICcuLi9pbmRleC5qcyc7XG5pbXBvcnQgc3RvcmFnZSBmcm9tICcuL3N0b3JhZ2UuanMnO1xuXG4vLyBNZWRpYVxuaW1wb3J0IGNpcmNsZSBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2NpcmNsZS5wbmcnO1xuaW1wb3J0IHN0YXIgZnJvbSAnLi4vLi4vZGlzdC9tZWRpYS9zdGFyLnBuZyc7XG5pbXBvcnQgZWRpdCBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2VkaXQucG5nJztcbmltcG9ydCByZW1vdmUgZnJvbSAnLi4vLi4vZGlzdC9tZWRpYS9yZW1vdmUucG5nJztcbmltcG9ydCBmdWxsc3RhciBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2Z1bGxzdGFyLnBuZyc7XG5pbXBvcnQgcHJvamVjdGljb24gZnJvbSAnLi4vLi4vZGlzdC9tZWRpYS9wcm9qZWN0cy5wbmcnO1xuaW1wb3J0IGFkZCBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2FkZC5wbmcnO1xuXG5jb25zdCBET00gPSAoKCkgPT4ge1xuICAgIGNvbnN0IHJlbW92ZVBhZ2UgPSAoKSA9PiB7XG4gICAgICAgIGxldCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuICAgICAgICBsZXQgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKTtcbiAgICAgICAgYm9keS5yZW1vdmVDaGlsZChtYWluKTtcbiAgICAgICAgbWFpbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ21haW4nKTtcbiAgICAgICAgYm9keS5hcHBlbmRDaGlsZChtYWluKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbmRlclBhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhc2tMaXN0O1xuICAgICAgICBsZXQgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKTtcbiAgICAgICAgbGV0IHBhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgICAgICBpZiAoZXZlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGFza0xpc3QgPSBbXTtcbiAgICAgICAgICAgIHBhZ2UudGV4dENvbnRlbnQgPSAnaW5ib3gnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFza0xpc3QgPSBzdG9yYWdlW2Ake2NvbnRyb2xsZXIuYWN0aXZlUGFnZX1gXTtcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgPT09ICdQJykge1xuICAgICAgICAgICAgICAgIHBhZ2UudGV4dENvbnRlbnQgPSBldmVudC50YXJnZXQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gJ0lNRycpIHtcbiAgICAgICAgICAgICAgICBwYWdlLnRleHRDb250ZW50ID0gZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nLnRleHRDb250ZW50O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYWdlLnRleHRDb250ZW50ID0gZXZlbnQudGFyZ2V0LmNoaWxkcmVuWzFdLnRleHRDb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbWFpbi5hcHBlbmRDaGlsZChwYWdlKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhc2tMaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBhZGRUYXNrKCk7XG4gICAgICAgICAgICBlZGl0VGFzayh0YXNrTGlzdFtpXSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYWRkVGFza0Zvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgYWRkVGFza0Zvcm0uc2V0QXR0cmlidXRlKCdpZCcsICdhZGQtdGFzay1mb3JtJyk7XG5cbiAgICAgICAgbGV0IGltYWdlMSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZTEuc3JjID0gYWRkO1xuICAgICAgICBhZGRUYXNrRm9ybS5hcHBlbmRDaGlsZChpbWFnZTEpO1xuXG4gICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSAnQWRkIFRhc2snO1xuICAgICAgICBhZGRUYXNrRm9ybS5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cbiAgICAgICAgYWRkVGFza0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW5kZXJUYXNrRm9ybSk7XG4gICAgICAgIG1haW4uYXBwZW5kQ2hpbGQoYWRkVGFza0Zvcm0pO1xuICAgIH07XG4gICAgY29uc3QgcmVuZGVyUHJvamVjdEZvcm0gPSAoKSA9PiB7XG4gICAgICAgIGxldCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuICAgICAgICBcbiAgICAgICAgbGV0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgb3ZlcmxheS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ292ZXJsYXknKTtcblxuICAgICAgICBsZXQgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWZvcm0nKTtcblxuICAgICAgICBsZXQgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdoZWFkZXInKTtcblxuICAgICAgICBsZXQgaGVhZGVyMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgICAgIGhlYWRlcjIudGV4dENvbnRlbnQgPSAnQWRkIGEgUHJvamVjdCc7XG4gICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChoZWFkZXIyKTtcblxuICAgICAgICBsZXQgaW1hZ2UxID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlMS5zcmMgPSByZW1vdmU7XG4gICAgICAgIGltYWdlMS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZUZvcm0pO1xuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoaW1hZ2UxKTtcblxuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGhlYWRlcik7XG5cbiAgICAgICAgbGV0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBuYW1lLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7XG4gICAgICAgIG5hbWUuc2V0QXR0cmlidXRlKCdpZCcsICdwcm9qZWN0LW5hbWUnKTtcbiAgICAgICAgbmFtZS5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ3Byb2plY3QgbmFtZScpO1xuICAgICAgICBuYW1lLnNldEF0dHJpYnV0ZSgnbmFtZScsICdwcm9qZWN0TmFtZScpO1xuICAgICAgICBuYW1lLnNldEF0dHJpYnV0ZSgncmVxdWlyZWQnLCAnJyk7XG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQobmFtZSk7XG5cbiAgICAgICAgbGV0IGZvb3RlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBmb290ZXIuY2xhc3NMaXN0LmFkZCgnZm9vdGVyJyk7XG4gICAgICAgIGZvb3Rlci5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWZvb3RlcicpO1xuXG4gICAgICAgIGxldCBzdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgc3VibWl0LnNldEF0dHJpYnV0ZSgndHlwZScsICdzdWJtaXQnKTtcbiAgICAgICAgc3VibWl0LnRleHRDb250ZW50ID0gJ0FkZCBQcm9qZWN0JztcbiAgICAgICAgZm9vdGVyLmFwcGVuZENoaWxkKHN1Ym1pdCk7XG5cbiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChmb290ZXIpO1xuXG4gICAgICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cbiAgICAgICAgYm9keS5wcmVwZW5kKG92ZXJsYXkpO1xuICAgIH07XG4gICAgY29uc3QgYWRkUHJvamVjdCA9ICgpID0+IHtcbiAgICAgICAgbGV0IHByb2plY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3RzJyk7XG5cbiAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0cyA+IGgyJyk7XG5cbiAgICAgICAgbGV0IHByb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcHJvamVjdC5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0Jyk7XG5cbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29udGFpbmVyJyk7XG4gICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbnRyb2xsZXIuY2hhbmdlUGFnZSk7XG5cbiAgICAgICAgbGV0IGltYWdlMSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZTEuc3JjID0gcHJvamVjdGljb247XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbWFnZTEpO1xuXG4gICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtIGlucHV0JykudmFsdWU7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cbiAgICAgICAgcHJvamVjdC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXG4gICAgICAgIGxldCB0cmFzaERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0cmFzaERpdi5jbGFzc0xpc3QuYWRkKCd0cmFzaC1jb250YWluZXInKTtcbiAgICAgICAgdHJhc2hEaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjb250cm9sbGVyLnJlbW92ZVByb2plY3QpO1xuXG4gICAgICAgIGxldCB0cmFzaCA9IG5ldyBJbWFnZSgpO1xuICAgICAgICB0cmFzaC5zcmMgPSByZW1vdmU7XG4gICAgICAgIHRyYXNoRGl2LmFwcGVuZENoaWxkKHRyYXNoKTtcblxuICAgICAgICBwcm9qZWN0LmFwcGVuZENoaWxkKHRyYXNoRGl2KTtcblxuICAgICAgICBoZWFkZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocHJvamVjdCwgaGVhZGVyLm5leHRTaWJsaW5nKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVByb2plY3QgPSAoY29udGFpbmVyKSA9PiB7XG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbmRlclRhc2tGb3JtID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBpc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgYnJlYWttZTogaWYgKGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdhZGQtdGFzay1mb3JtJykge1xuICAgICAgICAgICAgYnJlYWsgYnJlYWttZTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdhZGQtdGFzay1mb3JtJykge1xuICAgICAgICAgICAgYnJlYWsgYnJlYWttZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlzRWRpdCA9IHRydWU7XG4gICAgICAgICAgICBjb250cm9sbGVyLmFjdGl2ZVRhc2sgPSBjb250cm9sbGVyLmxpbmtUYXNrKGV2ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWFpbicpO1xuICAgICAgICBcbiAgICAgICAgbGV0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgb3ZlcmxheS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ292ZXJsYXknKTtcblxuICAgICAgICBsZXQgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcblxuICAgICAgICBsZXQgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdoZWFkZXInKTtcblxuICAgICAgICBsZXQgaGVhZGVyMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgICAgIChpc0VkaXQpID8gaGVhZGVyMi50ZXh0Q29udGVudCA9ICdFZGl0IFRhc2snIDogaGVhZGVyMi50ZXh0Q29udGVudCA9ICdDcmVhdGUgYSBOZXcgVGFzayc7XG4gICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChoZWFkZXIyKTtcblxuICAgICAgICBsZXQgaW1hZ2UxID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlMS5zcmMgPSByZW1vdmU7XG4gICAgICAgIGltYWdlMS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZUZvcm0pO1xuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoaW1hZ2UxKTtcblxuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGhlYWRlcik7XG5cbiAgICAgICAgbGV0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgdGl0bGUuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgICAgICAgdGl0bGUuc2V0QXR0cmlidXRlKCdpZCcsICd0aXRsZScpO1xuICAgICAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ3RpdGxlJyk7XG4gICAgICAgIHRpdGxlLnNldEF0dHJpYnV0ZSgnbmFtZScsICd0aXRsZScpO1xuICAgICAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoJ3JlcXVpcmVkJywgJycpO1xuICAgICAgICAoaXNFZGl0KSA/IHRpdGxlLnZhbHVlID0gY29udHJvbGxlci5hY3RpdmVUYXNrLnRpdGxlIDogdGl0bGUgPSB0aXRsZTtcbiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICAgICAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKCdpZCcsICdkZXNjcmlwdGlvbicpO1xuICAgICAgICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ2Rlc2NyaXB0aW9uJyk7XG4gICAgICAgIGRlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZSgnbmFtZScsICdkZXNjcmlwdGlvbicpO1xuICAgICAgICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoJ3Jvd3MnLCAnMTAnKTtcbiAgICAgICAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKCdjb2xzJywgJzQwJyk7XG4gICAgICAgIGRlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZSgncmVxdWlyZWQnLCAnJyk7XG4gICAgICAgIChpc0VkaXQpID8gZGVzY3JpcHRpb24udmFsdWUgPSBjb250cm9sbGVyLmFjdGl2ZVRhc2suZGVzY3JpcHRpb24gOiBkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcblxuICAgICAgICBsZXQgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGRhdGUuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2RhdGUnKTtcbiAgICAgICAgZGF0ZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2RhdGUnKTtcbiAgICAgICAgZGF0ZS5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnZGF0ZScpO1xuICAgICAgICBkYXRlLnNldEF0dHJpYnV0ZSgncmVxdWlyZWQnLCAnJyk7XG4gICAgICAgIChpc0VkaXQpID8gZGF0ZS52YWx1ZSA9IGNvbnRyb2xsZXIuYWN0aXZlVGFzay5kYXRlIDogZGF0ZSA9IGRhdGU7XG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoZGF0ZSk7XG5cbiAgICAgICAgbGV0IGZvb3RlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBmb290ZXIuY2xhc3NMaXN0LmFkZCgnZm9vdGVyJyk7XG5cbiAgICAgICAgbGV0IGltYWdlMiA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpZiAoaXNFZGl0KSB7XG4gICAgICAgICAgICAoY29udHJvbGxlci5hY3RpdmVUYXNrLnByaW9yaXR5U3RhdHVzKSA/IGltYWdlMi5zcmMgPSBmdWxsc3RhciA6IGltYWdlMi5zcmMgPSBzdGFyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW1hZ2UyLnNyYyA9IHN0YXI7XG4gICAgICAgIH1cbiAgICAgICAgaW1hZ2UyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlUHJpb3JpdHkpO1xuICAgICAgICBmb290ZXIuYXBwZW5kQ2hpbGQoaW1hZ2UyKTtcblxuICAgICAgICBsZXQgc3VibWl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIHN1Ym1pdC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnc3VibWl0Jyk7XG4gICAgICAgIGlmICghaXNFZGl0KSB7XG4gICAgICAgICAgICBzdWJtaXQuc2V0QXR0cmlidXRlKCdpZCcsICdhZGQtdGFzaycpO1xuICAgICAgICAgICAgc3VibWl0LnRleHRDb250ZW50ID0gJ0FkZCBUYXNrJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1Ym1pdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2VkaXQtdGFzaycpO1xuICAgICAgICAgICAgc3VibWl0LnRleHRDb250ZW50ID0gJ0VkaXQgVGFzayc7XG4gICAgICAgIH1cbiAgICAgICAgZm9vdGVyLmFwcGVuZENoaWxkKHN1Ym1pdCk7XG5cbiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChmb290ZXIpO1xuXG4gICAgICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cbiAgICAgICAgbWFpbi5wcmVwZW5kKG92ZXJsYXkpO1xuICAgIH07XG4gICAgY29uc3QgZGVsZXRlRm9ybSA9ICgpID0+IHtcbiAgICAgICAgbGV0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3ZlcmxheScpO1xuICAgICAgICBvdmVybGF5LnJlbW92ZSgpO1xuICAgIH07XG4gICAgY29uc3QgYWRkVGFzayA9ICgpID0+IHtcbiAgICAgICAgbGV0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XG4gICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluID4gaDInKTtcbiAgICAgICAgbGV0IHBhZ2UgPSBzdG9yYWdlW2Ake2NvbnRyb2xsZXIuYWN0aXZlUGFnZX1gXTtcblxuICAgICAgICBsZXQgdGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0YXNrLnNldEF0dHJpYnV0ZSgnaWQnLCAndGFzaycpO1xuICAgICAgICBwYWdlW3BhZ2UubGVuZ3RoIC0gMV0uRE9NbGluayA9IHRhc2s7XG4gICAgICAgIFxuICAgICAgICBsZXQgbGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBsZWZ0LmNsYXNzTGlzdC5hZGQoJ2xlZnQnKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBpbWFnZTEgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1hZ2UxLnNyYyA9IGNpcmNsZTtcbiAgICAgICAgaW1hZ2UxLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY29udHJvbGxlci5yZW1vdmVUYXNrKTtcbiAgICAgICAgbGVmdC5hcHBlbmRDaGlsZChpbWFnZTEpO1xuICAgICAgICBcbiAgICAgICAgbGV0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcbiAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSBwYWdlW3BhZ2UubGVuZ3RoIC0gMV0udGl0bGU7XG4gICAgICAgIGxlZnQuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgICAgIHRhc2suYXBwZW5kQ2hpbGQobGVmdCk7XG5cbiAgICAgICAgbGV0IHJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XG5cbiAgICAgICAgbGV0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdpZCcsICdpbmZvJyk7XG4gICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdJbmZvJztcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdmlld1Rhc2spO1xuICAgICAgICByaWdodC5hcHBlbmRDaGlsZChidXR0b24pO1xuXG4gICAgICAgIGxldCBpbWFnZTIgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaWYgKHBhZ2VbcGFnZS5sZW5ndGggLSAxXS5wcmlvcml0eVN0YXR1cyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGltYWdlMi5zcmMgPSBzdGFyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW1hZ2UyLnNyYyA9IGZ1bGxzdGFyO1xuICAgICAgICB9XG4gICAgICAgIGltYWdlMi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbnRyb2xsZXIudG9nZ2xlUHJpb3JpdHkpO1xuICAgICAgICByaWdodC5hcHBlbmRDaGlsZChpbWFnZTIpO1xuXG4gICAgICAgIGxldCBpbWFnZTMgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1hZ2UzLnNyYyA9IGVkaXQ7XG4gICAgICAgIGltYWdlMy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbmRlclRhc2tGb3JtKTtcbiAgICAgICAgcmlnaHQuYXBwZW5kQ2hpbGQoaW1hZ2UzKTtcblxuICAgICAgICBsZXQgaW1hZ2U0ID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlNC5zcmMgPSByZW1vdmU7XG4gICAgICAgIGltYWdlNC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbnRyb2xsZXIucmVtb3ZlVGFzayk7XG4gICAgICAgIHJpZ2h0LmFwcGVuZENoaWxkKGltYWdlNCk7XG5cbiAgICAgICAgdGFzay5hcHBlbmRDaGlsZChyaWdodCk7XG5cbiAgICAgICAgY29udHJvbGxlci5hY3RpdmVUYXNrID0gcGFnZVtwYWdlLmxlbmd0aCAtIDFdOyAvLyBBbGxvdyBtZXRob2QgdG8gYmUgdXNlZCB0byByZW5kZXJQYWdlIGFuZCBhZGQgdGFza3NcbiAgICBcbiAgICAgICAgaGVhZGVyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRhc2ssIGhlYWRlci5uZXh0U2libGluZyk7XG4gICAgfTtcblxuICAgIGNvbnN0IHZpZXdUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0YXNrID0gY29udHJvbGxlci5saW5rVGFzayhldmVudCk7XG5cbiAgICAgICAgbGV0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XG4gICAgICAgIFxuICAgICAgICBsZXQgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBvdmVybGF5LnNldEF0dHJpYnV0ZSgnaWQnLCAnb3ZlcmxheScpO1xuXG4gICAgICAgIGxldCB2aWV3Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHZpZXdDb250YWluZXIuc2V0QXR0cmlidXRlKCdpZCcsICd2aWV3LXRhc2snKTtcbiAgICBcbiAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZCgnaGVhZGVyJyk7XG5cbiAgICAgICAgbGV0IGhlYWRlcjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgICAgICBoZWFkZXIyLnRleHRDb250ZW50ID0gYCR7dGFzay50aXRsZX1gO1xuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoaGVhZGVyMik7XG5cbiAgICAgICAgbGV0IGltYWdlMSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZTEuc3JjID0gcmVtb3ZlO1xuICAgICAgICBpbWFnZTEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkZWxldGVGb3JtKTtcbiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGltYWdlMSk7XG5cbiAgICAgICAgdmlld0NvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkZXIpO1xuXG4gICAgICAgIGxldCBkZXRhaWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBkZXRhaWxzLnRleHRDb250ZW50ID0gYCR7dGFzay5kZXNjcmlwdGlvbn1gO1xuICAgICAgICB2aWV3Q29udGFpbmVyLmFwcGVuZENoaWxkKGRldGFpbHMpO1xuXG4gICAgICAgIGxldCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBkYXRlLnRleHRDb250ZW50ID0gYCR7dGFzay5kYXRlfWA7XG4gICAgICAgIHZpZXdDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF0ZSk7XG5cbiAgICAgICAgbGV0IHByaW9yaXR5ID0gbmV3IEltYWdlKCk7XG4gICAgICAgICh0YXNrLnByaW9yaXR5U3RhdHVzKSA/IHByaW9yaXR5LnNyYyA9IGZ1bGxzdGFyIDogcHJpb3JpdHkuc3JjID0gc3RhcjtcbiAgICAgICAgdmlld0NvbnRhaW5lci5hcHBlbmRDaGlsZChwcmlvcml0eSk7XG5cbiAgICAgICAgb3ZlcmxheS5hcHBlbmRDaGlsZCh2aWV3Q29udGFpbmVyKTtcblxuICAgICAgICBtYWluLnByZXBlbmQob3ZlcmxheSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGVkaXRUYXNrID0gKG9iamVjdCkgPT4ge1xuICAgICAgICBsZXQgaGVhZGVyID0gY29udHJvbGxlci5hY3RpdmVUYXNrLkRPTWxpbmsuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV07XG5cbiAgICAgICAgbGV0IHBhcmVudE5vZGUgPSBjb250cm9sbGVyLmFjdGl2ZVRhc2suRE9NbGluay5jaGlsZHJlblsxXTtcblxuICAgICAgICBsZXQgb2xkUHJpb3JpdHkgPSBjb250cm9sbGVyLmFjdGl2ZVRhc2suRE9NbGluay5jaGlsZHJlblsxXS5jaGlsZHJlblsxXTtcblxuICAgICAgICAob2JqZWN0ICE9PSB1bmRlZmluZWQpID8gY29udHJvbGxlci5hY3RpdmVUYXNrID0gb2JqZWN0IDogY29udHJvbGxlci5hY3RpdmVUYXNrID0gY29udHJvbGxlci5hY3RpdmVUYXNrOyAvLyBBbGxvd3MgbWV0aG9kIHRvIGJlIHVzZWQgdG8gcmVuZGVyUGFnZSBhbmQgZWRpdCB0YXNrc1xuICAgICAgICBcbiAgICAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gY29udHJvbGxlci5hY3RpdmVUYXNrLnRpdGxlO1xuXG4gICAgICAgIGxldCBuZXdQcmlvcml0eSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAoY29udHJvbGxlci5hY3RpdmVUYXNrLnByaW9yaXR5U3RhdHVzID09PSB0cnVlKSA/IG5ld1ByaW9yaXR5LnNyYyA9IGZ1bGxzdGFyIDogbmV3UHJpb3JpdHkuc3JjID0gc3RhcjtcbiAgICAgICAgbmV3UHJpb3JpdHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjb250cm9sbGVyLnRvZ2dsZVByaW9yaXR5KTtcbiAgICAgICAgcGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3UHJpb3JpdHksIG9sZFByaW9yaXR5KTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhc2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHJlbW92YWwgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgICByZW1vdmFsLnJlbW92ZSgpO1xuICAgIH07XG5cbiAgICBjb25zdCB0b2dnbGVQcmlvcml0eSA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgb2xkRWxlbWVudCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgbGV0IG5ld0VsZW1lbnQgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaWYgKG9sZEVsZW1lbnQuc3JjID09PSBzdGFyKSB7XG4gICAgICAgICAgICBuZXdFbGVtZW50LnNyYyA9IGZ1bGxzdGFyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3RWxlbWVudC5zcmMgPSBzdGFyO1xuICAgICAgICB9XG4gICAgICAgIG5ld0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjb250cm9sbGVyLnRvZ2dsZVByaW9yaXR5KTtcbiAgICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld0VsZW1lbnQsIG9sZEVsZW1lbnQpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge3JlbW92ZVBhZ2UsIHJlbmRlclBhZ2UsIHJlbmRlclRhc2tGb3JtLCByZW5kZXJQcm9qZWN0Rm9ybSwgZGVsZXRlRm9ybSwgYWRkUHJvamVjdCwgcmVtb3ZlUHJvamVjdCwgYWRkVGFzaywgZWRpdFRhc2ssIHJlbW92ZVRhc2ssIHRvZ2dsZVByaW9yaXR5fTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IERPTTsiLCJpbXBvcnQgY29udHJvbGxlciBmcm9tICcuLi9pbmRleC5qcyc7XG5pbXBvcnQgc3RvcmFnZSBmcm9tICcuL3N0b3JhZ2UuanMnO1xuaW1wb3J0IHRhc2tGYWN0b3J5IGZyb20gJy4vdGFzay5qcyc7XG5pbXBvcnQgRE9NIGZyb20gJy4vRE9NLmpzJztcblxuLy8gTWVkaWEgSW1wb3J0c1xuaW1wb3J0IHN0YXIgZnJvbSAnLi4vLi4vZGlzdC9tZWRpYS9zdGFyLnBuZyc7XG5pbXBvcnQgZnVsbHN0YXIgZnJvbSAnLi4vLi4vZGlzdC9tZWRpYS9mdWxsc3Rhci5wbmcnO1xuXG5jb25zdCBhcHBsaWNhdGlvbiA9ICgoKSA9PiB7XG4gICAgY29uc3QgYWRkUHJvamVjdCA9ICgpID0+IHtcbiAgICAgICAgbGV0IHByb2plY3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3QtbmFtZScpLnZhbHVlXG4gICAgICAgIHN0b3JhZ2VbYCR7cHJvamVjdE5hbWV9YF0gPSBbXTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZFRvZGF5QXJyYXkgPSAoKSA9PiB7XG5cbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVByb2plY3QgPSAoYXJyYXlOYW1lKSA9PiB7XG4gICAgICAgIGRlbGV0ZSBzdG9yYWdlW2Ake2FycmF5TmFtZX1gXTtcbiAgICB9O1xuICAgIGNvbnN0IGFkZFRhc2sgPSAoKSA9PiB7XG4gICAgICAgIGxldCBwYWdlID0gc3RvcmFnZVtgJHtjb250cm9sbGVyLmFjdGl2ZVBhZ2V9YF07XG4gICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aXRsZScpLnZhbHVlO1xuICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKS52YWx1ZTtcbiAgICAgICAgbGV0IGRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF0ZScpLnZhbHVlO1xuICAgICAgICBsZXQgaXNQcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXIgPiBpbWcnKTtcbiAgICAgICAgaWYgKGlzUHJpb3JpdHkuc3JjID09PSBzdGFyKSB7XG4gICAgICAgICAgICBpc1ByaW9yaXR5ID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpc1ByaW9yaXR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBwYWdlW3BhZ2UubGVuZ3RoXSA9IHRhc2tGYWN0b3J5KHRpdGxlLCBkZXNjcmlwdGlvbiwgZGF0ZSwgaXNQcmlvcml0eSk7XG4gICAgfTtcbiAgICBjb25zdCBlZGl0VGFzayA9ICgpID0+IHtcbiAgICAgICAgY29udHJvbGxlci5hY3RpdmVUYXNrLnRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpdGxlJykudmFsdWU7XG4gICAgICAgIGNvbnRyb2xsZXIuYWN0aXZlVGFzay5kZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZXNjcmlwdGlvbicpLnZhbHVlO1xuICAgICAgICBjb250cm9sbGVyLmFjdGl2ZVRhc2suZGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJykudmFsdWU7XG4gICAgICAgIGxldCBwcmlvcml0eVN0YXR1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXIgPiBpbWcnKTtcbiAgICAgICAgKHByaW9yaXR5U3RhdHVzLnNyYyA9PT0gc3RhcikgPyBjb250cm9sbGVyLmFjdGl2ZVRhc2sucHJpb3JpdHlTdGF0dXMgPSBmYWxzZSA6IGNvbnRyb2xsZXIuYWN0aXZlVGFzay5wcmlvcml0eVN0YXR1cyA9IHRydWU7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBwYWdlID0gc3RvcmFnZVtgJHtjb250cm9sbGVyLmFjdGl2ZVBhZ2V9YF07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFnZS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKHBhZ2VbaV0uRE9NbGluayA9PT0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgIHBhZ2Uuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVQcmlvcml0eSA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgdGFzayA9IGNvbnRyb2xsZXIubGlua1Rhc2soZXZlbnQpO1xuICAgICAgICAodGFzay5wcmlvcml0eVN0YXR1cykgPyB0YXNrLnByaW9yaXR5U3RhdHVzID0gZmFsc2UgOiB0YXNrLnByaW9yaXR5U3RhdHVzID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHthZGRQcm9qZWN0LCBhZGRUb2RheUFycmF5LCByZW1vdmVQcm9qZWN0LCBhZGRUYXNrLCBlZGl0VGFzaywgcmVtb3ZlVGFzaywgdG9nZ2xlUHJpb3JpdHl9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgYXBwbGljYXRpb247IiwiY29uc3QgdGFza0ZhY3RvcnkgPSAodGl0bGUsIGRlc2NyaXB0aW9uLCBkYXRlLCBpc1ByaW9yaXR5KSA9PiB7XG4gICAgbGV0IERPTWxpbms7XG4gICAgcmV0dXJuIHt0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5U3RhdHVzOiBpc1ByaW9yaXR5LCBET01saW5rfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRhc2tGYWN0b3J5OyIsImltcG9ydCBET00gZnJvbSAnLi9tb2R1bGVzL0RPTS5qcyc7XG5pbXBvcnQgc3RvcmFnZSBmcm9tICcuL21vZHVsZXMvc3RvcmFnZS5qcydcbmltcG9ydCBhcHBsaWNhdGlvbiBmcm9tICcuL21vZHVsZXMvYXBwbGljYXRpb24uanMnO1xuaW1wb3J0IHRhc2tGYWN0b3J5IGZyb20gJy4vbW9kdWxlcy90YXNrLmpzJztcblxuY29uc3QgY29udHJvbGxlciA9ICgoKSA9PiB7XG4gICAgbGV0IGFjdGl2ZVBhZ2UgPSAnaW5ib3gnO1xuICAgIGxldCBhY3RpdmVUYXNrO1xuXG4gICAgY29uc3QgY2hhbmdlUGFnZSA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID09PSAnUCcpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYWN0aXZlUGFnZSA9IGV2ZW50LnRhcmdldC50ZXh0Q29udGVudDtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgPT09ICdJTUcnKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmFjdGl2ZVBhZ2UgPSBldmVudC50YXJnZXQubmV4dFNpYmxpbmcudGV4dENvbnRlbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmFjdGl2ZVBhZ2UgPSBldmVudC50YXJnZXQuY2hpbGRyZW5bMV0udGV4dENvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgRE9NLnJlbW92ZVBhZ2UoKTtcbiAgICAgICAgRE9NLnJlbmRlclBhZ2UoZXZlbnQpO1xuICAgIH07XG4gICAgY29uc3QgYWRkUHJvamVjdCA9IChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhcHBsaWNhdGlvbi5hZGRQcm9qZWN0KCk7XG4gICAgICAgIERPTS5hZGRQcm9qZWN0KCk7XG4gICAgICAgIERPTS5kZWxldGVGb3JtKCk7XG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVQcm9qZWN0ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBwcm9qZWN0QXJyYXk7XG4gICAgICAgIGxldCBjb250YWluZXI7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCcudHJhc2gtY29udGFpbmVyJykpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lciA9IGV2ZW50LnRhcmdldC5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250YWluZXIgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZS5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgcHJvamVjdEFycmF5ID0gY29udGFpbmVyLmNoaWxkcmVuWzFdLnRleHRDb250ZW50O1xuICAgICAgICBjb250YWluZXIgPSBjb250YWluZXIucGFyZW50Tm9kZTtcbiAgICAgICAgYXBwbGljYXRpb24ucmVtb3ZlUHJvamVjdChwcm9qZWN0QXJyYXkpO1xuICAgICAgICBET00ucmVtb3ZlUHJvamVjdChjb250YWluZXIpO1xuICAgIH07XG4gICAgY29uc3QgYWRkVGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhcHBsaWNhdGlvbi5hZGRUYXNrKCk7XG4gICAgICAgIERPTS5hZGRUYXNrKCk7XG4gICAgICAgIERPTS5kZWxldGVGb3JtKCk7XG4gICAgfTtcbiAgICBjb25zdCBlZGl0VGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhcHBsaWNhdGlvbi5lZGl0VGFzaygpO1xuICAgICAgICBET00uZWRpdFRhc2soKTtcbiAgICAgICAgRE9NLmRlbGV0ZUZvcm0oKTsgXG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGFwcGxpY2F0aW9uLnJlbW92ZVRhc2soZXZlbnQpO1xuICAgICAgICBET00ucmVtb3ZlVGFzayhldmVudCk7XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVQcmlvcml0eSA9IChldmVudCkgPT4ge1xuICAgICAgICBhcHBsaWNhdGlvbi50b2dnbGVQcmlvcml0eShldmVudCk7XG4gICAgICAgIERPTS50b2dnbGVQcmlvcml0eShldmVudCk7XG4gICAgfTtcbiAgICBjb25zdCBjaGVja0Zvcm1QdXJwb3NlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtIGJ1dHRvbicpO1xuICAgICAgICBpZiAoYnV0dG9uLmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2FkZC10YXNrJykge1xuICAgICAgICAgICAgYWRkVGFzayhldmVudCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYnV0dG9uLmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2VkaXQtdGFzaycpIHtcbiAgICAgICAgICAgIGVkaXRUYXNrKGV2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFkZFByb2plY3QoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfSBcbiAgICBjb25zdCBsaW5rVGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0b3JhZ2VbYCR7Y29udHJvbGxlci5hY3RpdmVQYWdlfWBdLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAoc3RvcmFnZVtgJHtjb250cm9sbGVyLmFjdGl2ZVBhZ2V9YF1baV0uRE9NbGluayA9PT0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yYWdlW2Ake2NvbnRyb2xsZXIuYWN0aXZlUGFnZX1gXVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBFdmVudCBMaXN0ZW5lcnNcbiAgICBjb25zdCBpbmJveEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbmJveCcpO1xuICAgIGluYm94QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hhbmdlUGFnZSk7XG5cbiAgICBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC1wcm9qZWN0LWZvcm0nKTtcbiAgICBhZGRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgRE9NLnJlbmRlclByb2plY3RGb3JtKTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGNoZWNrRm9ybVB1cnBvc2UpO1xuXG4gICAgcmV0dXJuIHthY3RpdmVQYWdlLCBhY3RpdmVUYXNrLCBjaGFuZ2VQYWdlLCBhZGRQcm9qZWN0LCByZW1vdmVQcm9qZWN0LCBjaGVja0Zvcm1QdXJwb3NlLCBsaW5rVGFzaywgZWRpdFRhc2ssIHJlbW92ZVRhc2ssIHRvZ2dsZVByaW9yaXR5fTtcbn0pKCk7XG5cbkRPTS5yZW5kZXJQYWdlKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbnRyb2xsZXI7Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwiRXJyb3IiLCJyZXBsYWNlIiwicCIsImluYm94IiwidG9kYXkiLCJET00iLCJyZW5kZXJUYXNrRm9ybSIsImV2ZW50IiwiaXNFZGl0IiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwicGFyZW50Tm9kZSIsIm1haW4iLCJxdWVyeVNlbGVjdG9yIiwib3ZlcmxheSIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJmb3JtIiwiaGVhZGVyIiwiY2xhc3NMaXN0IiwiYWRkIiwiaGVhZGVyMiIsInRleHRDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJpbWFnZTEiLCJJbWFnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZWxldGVGb3JtIiwidGl0bGUiLCJ2YWx1ZSIsImRlc2NyaXB0aW9uIiwiZGF0ZSIsImZvb3RlciIsImltYWdlMiIsInRvZ2dsZVByaW9yaXR5Iiwic3VibWl0IiwicHJlcGVuZCIsInJlbW92ZSIsImFkZFRhc2siLCJwYWdlIiwidGFzayIsIkRPTWxpbmsiLCJsZWZ0IiwicmlnaHQiLCJidXR0b24iLCJ2aWV3VGFzayIsInByaW9yaXR5U3RhdHVzIiwiaW1hZ2UzIiwiaW1hZ2U0IiwiaW5zZXJ0QmVmb3JlIiwibmV4dFNpYmxpbmciLCJ2aWV3Q29udGFpbmVyIiwiZGV0YWlscyIsInByaW9yaXR5IiwiZWRpdFRhc2siLCJvYmplY3QiLCJvbGRQcmlvcml0eSIsInVuZGVmaW5lZCIsIm5ld1ByaW9yaXR5IiwicmVwbGFjZUNoaWxkIiwib2xkRWxlbWVudCIsIm5ld0VsZW1lbnQiLCJyZW1vdmVQYWdlIiwiYm9keSIsInJlbW92ZUNoaWxkIiwicmVuZGVyUGFnZSIsInRhc2tMaXN0Iiwibm9kZU5hbWUiLCJjaGlsZHJlbiIsImkiLCJhZGRUYXNrRm9ybSIsInJlbmRlclByb2plY3RGb3JtIiwibmFtZSIsImFkZFByb2plY3QiLCJwcm9qZWN0IiwiY29udGFpbmVyIiwidHJhc2hEaXYiLCJ0cmFzaCIsInJlbW92ZVByb2plY3QiLCJyZW1vdmVUYXNrIiwicHJvamVjdE5hbWUiLCJhcnJheU5hbWUiLCJpc1ByaW9yaXR5Iiwic3BsaWNlIiwiY29udHJvbGxlciIsImNoYW5nZVBhZ2UiLCJhY3RpdmVQYWdlIiwicHJldmVudERlZmF1bHQiLCJjaGVja0Zvcm1QdXJwb3NlIiwiYWN0aXZlVGFzayIsInByb2plY3RBcnJheSIsImNvbnRhaW5zIiwicHJldmlvdXNTaWJsaW5nIiwibGlua1Rhc2siXSwic291cmNlUm9vdCI6IiJ9