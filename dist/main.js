(()=>{"use strict";var e={d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&(t=r.currentScript.src),!t)){var i=r.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.d({},{Z:()=>m});const t={inbox:[],today:[],projects:[]},r=e.p+"3792aed98a9589656dd4.png",i=e.p+"38c6e851ea03d5118e55.png",n=e.p+"9989a4efa4a9c99c60a3.png",a=e.p+"94441b8e183728b82ae3.png",d=e.p+"596bd58bd36651b3b83d.png",o=(()=>{const e=e=>{let t=!1;"add-task-form"!==e.target.getAttribute("id")&&"add-task-form"!==e.target.parentNode.getAttribute("id")&&(t=!0,m.activeTask=m.linkTask(e));let r=document.querySelector("main"),n=document.createElement("div");n.setAttribute("id","overlay");let l=document.createElement("form"),s=document.createElement("div");s.classList.add("header");let p=document.createElement("h2");p.textContent=t?"Edit Task":"Create a New Task",s.appendChild(p);let u=new Image;u.src=a,u.addEventListener("click",o),s.appendChild(u),l.appendChild(s);let v=document.createElement("input");v.setAttribute("type","text"),v.setAttribute("id","title"),v.setAttribute("placeholder","title"),v.setAttribute("name","title"),v.setAttribute("required",""),t&&(v.value=m.activeTask.title),l.appendChild(v);let k=document.createElement("textarea");k.setAttribute("id","description"),k.setAttribute("placeholder","description"),k.setAttribute("name","description"),k.setAttribute("rows","10"),k.setAttribute("cols","40"),k.setAttribute("required",""),t&&(k.value=m.activeTask.description),l.appendChild(k);let b=document.createElement("input");b.setAttribute("type","date"),b.setAttribute("id","date"),b.setAttribute("name","date"),b.setAttribute("required",""),t&&(b.value=m.activeTask.date),l.appendChild(b);let g=document.createElement("div");g.classList.add("footer");let h=new Image;t&&m.activeTask.priorityStatus?h.src=d:h.src=i,h.addEventListener("click",c),g.appendChild(h);let y=document.createElement("button");y.setAttribute("type","submit"),t?(y.setAttribute("id","edit-task"),y.textContent="Edit Task"):(y.setAttribute("id","add-task"),y.textContent="Add Task"),g.appendChild(y),l.appendChild(g),n.appendChild(l),r.prepend(n)},o=()=>{document.querySelector("#overlay").remove()},l=e=>{let t=m.linkTask(e),r=document.querySelector("main"),n=document.createElement("div");n.setAttribute("id","overlay");let l=document.createElement("div");l.setAttribute("id","view-task");let c=document.createElement("div");c.classList.add("header");let s=document.createElement("h2");s.textContent=`${t.title}`,c.appendChild(s);let p=new Image;p.src=a,p.addEventListener("click",o),c.appendChild(p),l.appendChild(c);let u=document.createElement("p");u.textContent=`${t.description}`,l.appendChild(u);let v=document.createElement("p");v.textContent=`${t.date}`,l.appendChild(v);let k=new Image;t.priorityStatus?k.src=d:k.src=i,l.appendChild(k),n.appendChild(l),r.prepend(n)},c=e=>{let t=e.target,r=new Image;t.src===i?r.src=d:r.src=i,r.addEventListener("click",m.togglePriority),e.target.parentNode.replaceChild(r,t)};return{renderPage:()=>{},renderTaskForm:e,renderProjectForm:()=>{},deleteForm:o,addProject:()=>{},removeProject:()=>{},addTask:()=>{document.querySelector("main");let o=document.querySelector("main > h2"),c=document.createElement("div");c.setAttribute("id","task"),t.inbox[t.inbox.length-1].DOMlink=c;let s=document.createElement("div");s.classList.add("left");let p=new Image;p.src=r,p.addEventListener("click",m.removeTask),s.appendChild(p);let u=document.createElement("h3");u.textContent=t.inbox[t.inbox.length-1].title,s.appendChild(u),c.appendChild(s);let v=document.createElement("div");v.classList.add("right");let k=document.createElement("button");k.setAttribute("id","info"),k.textContent="Info",k.addEventListener("click",l),v.appendChild(k);let b=new Image;!1===t.inbox[t.inbox.length-1].priorityStatus?b.src=i:b.src=d,b.addEventListener("click",m.togglePriority),v.appendChild(b);let g=new Image;g.src=n,g.addEventListener("click",e),v.appendChild(g);let h=new Image;h.src=a,h.addEventListener("click",m.removeTask),v.appendChild(h),c.appendChild(v),o.parentNode.insertBefore(c,o.nextSibling)},editTask:()=>{m.activeTask.DOMlink.children[0].children[1].textContent=m.activeTask.title;let e=m.activeTask.DOMlink.children[1],t=m.activeTask.DOMlink.children[1].children[1],r=new Image;!0===m.activeTask.priorityStatus?r.src=d:r.src=i,r.addEventListener("click",m.togglePriority),e.replaceChild(r,t)},removeTask:e=>{e.target.parentNode.parentNode.remove()},togglePriority:c}})(),l=o,c=()=>{let e=document.querySelector("#title").value,r=document.querySelector("#description").value,n=document.querySelector("#date").value,a=document.querySelector(".footer > img");a=a.src!==i,t.inbox[t.inbox.length]=((e,t,r,i)=>({title:e,description:t,date:r,priorityStatus:i,DOMlink:void 0}))(e,r,n,a)},s=()=>{m.activeTask.title=document.querySelector("#title").value,m.activeTask.description=document.querySelector("#description").value,m.activeTask.date=document.querySelector("#date").value,document.querySelector(".footer > img").src===i?m.activeTask.priorityStatus=!1:m.activeTask.priorityStatus=!0},p=e=>{for(let r=0;r<t.inbox.length;++r)t.inbox[r].DOMlink===e.target.parentNode.parentNode&&t.inbox.splice(r,1)},u=e=>{let t=m.linkTask(e);t.priorityStatus?t.priorityStatus=!1:t.priorityStatus=!0},m=(()=>{const e=e=>{e.preventDefault(),s(),l.editTask(),l.deleteForm()};return document.querySelector("#add-task-form").addEventListener("click",l.renderTaskForm),document.addEventListener("submit",(t=>{"add-task"===document.querySelector("form button").getAttribute("id")?(e=>{e.preventDefault(),c(),l.addTask(),l.deleteForm()})(t):e(t)})),{activeTask:void 0,addProject:()=>{},removeProject:()=>{},linkTask:e=>{for(let r=0;r<t.inbox.length;++r)if(t.inbox[r].DOMlink===e.target.parentNode.parentNode)return t.inbox[r]},editTask:e,removeTask:e=>{p(e),l.removeTask(e)},togglePriority:e=>{u(e),l.togglePriority(e)}}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDTixJQUNBLGFBQ0EsY0FBZ0IsRUFnQ3BCLE9BTG1CekUsU0FBU29CLGNBQWMsa0JBQy9CYSxpQkFBaUIsUUFBUyxrQkFFckNqQyxTQUFTaUMsaUJBQWlCLFVBcEJMbkIsSUFFaUIsYUFEckJkLFNBQVNvQixjQUFjLGVBQ3pCSCxhQUFhLE1BdEJaLENBQUNILElBQ2JBLEVBQU0yRCxpQkFDTixJQUNBLFlBQ0EsY0FBZ0IsRUFtQlpoQixDQUFRM0MsR0FFUnFELEVBQVNyRCxFQUNiLElBZ0JHLENBQUM0RCxnQkFqREpBLEVBaURnQm5CLFdBaERELE9BZ0RhQyxjQTdDVixPQTZDeUJtQixTQWQ3QjdELElBQ2QsSUFBSyxJQUFJMEQsRUFBSSxFQUFHQSxFQUFJLGlCQUF3QkEsRUFDeEMsR0FBSSxRQUFjQSxHQUFHZCxVQUFZNUMsRUFBTUUsT0FBT0UsV0FBV0EsV0FDckQsT0FBTyxRQUFjc0QsRUFFN0IsRUFTcURMLFdBQVVHLFdBOUIvQ3hELElBQ2hCLEVBQXVCQSxHQUN2QixhQUFlQSxFQUFNLEVBNEJzRDJCLGVBMUJ2RDNCLElBQ3BCLEVBQTJCQSxHQUMzQixpQkFBbUJBLEVBQU0sRUF5QmhDLEVBbkRrQixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi10b2RvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL29kaW4tdG9kby93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9tb2R1bGVzL3N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLy4vc3JjL21vZHVsZXMvRE9NLmpzIiwid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9tb2R1bGVzL2FwcGxpY2F0aW9uLmpzIiwid2VicGFjazovL29kaW4tdG9kby8uL3NyYy9tb2R1bGVzL3Rhc2suanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImNvbnN0IHN0b3JhZ2UgPSAoKCkgPT4ge1xuICAgIGxldCBpbmJveCA9IFtdO1xuICAgIGxldCB0b2RheSA9IFtdO1xuICAgIGxldCBwcm9qZWN0cyA9IFtdO1xuXG4gICAgcmV0dXJuIHtpbmJveCwgdG9kYXksIHByb2plY3RzfVxufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgc3RvcmFnZTsiLCIvLyBNb2R1bGVzXG5pbXBvcnQgY29udHJvbGxlciBmcm9tICcuLi9pbmRleC5qcyc7XG5pbXBvcnQgc3RvcmFnZSBmcm9tICcuL3N0b3JhZ2UuanMnO1xuXG4vLyBNZWRpYVxuaW1wb3J0IGNpcmNsZSBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2NpcmNsZS5wbmcnO1xuaW1wb3J0IHN0YXIgZnJvbSAnLi4vLi4vZGlzdC9tZWRpYS9zdGFyLnBuZyc7XG5pbXBvcnQgZWRpdCBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2VkaXQucG5nJztcbmltcG9ydCByZW1vdmUgZnJvbSAnLi4vLi4vZGlzdC9tZWRpYS9yZW1vdmUucG5nJztcbmltcG9ydCBmdWxsc3RhciBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2Z1bGxzdGFyLnBuZyc7XG5pbXBvcnQgeyBnZXRPdmVybGFwcGluZ0RheXNJbkludGVydmFscyB9IGZyb20gJ2RhdGUtZm5zJztcblxuY29uc3QgRE9NID0gKCgpID0+IHtcbiAgICBjb25zdCByZW5kZXJQYWdlID0gKCkgPT4ge1xuXG4gICAgfTtcbiAgICBjb25zdCByZW5kZXJQcm9qZWN0Rm9ybSA9ICgpID0+IHtcblxuICAgIH07XG4gICAgY29uc3QgYWRkUHJvamVjdCA9ICgpID0+IHtcblxuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlUHJvamVjdCA9ICgpID0+IHtcblxuICAgIH07XG4gICAgY29uc3QgcmVuZGVyVGFza0Zvcm0gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IGlzRWRpdCA9IGZhbHNlO1xuICAgICAgICBicmVha21lOiBpZiAoZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2FkZC10YXNrLWZvcm0nKSB7XG4gICAgICAgICAgICBicmVhayBicmVha21lO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2FkZC10YXNrLWZvcm0nKSB7XG4gICAgICAgICAgICBicmVhayBicmVha21lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXNFZGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYWN0aXZlVGFzayA9IGNvbnRyb2xsZXIubGlua1Rhc2soZXZlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XG4gICAgICAgIFxuICAgICAgICBsZXQgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBvdmVybGF5LnNldEF0dHJpYnV0ZSgnaWQnLCAnb3ZlcmxheScpO1xuXG4gICAgICAgIGxldCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuXG4gICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoJ2hlYWRlcicpO1xuXG4gICAgICAgIGxldCBoZWFkZXIyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcbiAgICAgICAgKGlzRWRpdCkgPyBoZWFkZXIyLnRleHRDb250ZW50ID0gJ0VkaXQgVGFzaycgOiBoZWFkZXIyLnRleHRDb250ZW50ID0gJ0NyZWF0ZSBhIE5ldyBUYXNrJztcbiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGhlYWRlcjIpO1xuXG4gICAgICAgIGxldCBpbWFnZTEgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1hZ2UxLnNyYyA9IHJlbW92ZTtcbiAgICAgICAgaW1hZ2UxLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVsZXRlRm9ybSk7XG4gICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChpbWFnZTEpO1xuXG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoaGVhZGVyKTtcblxuICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuICAgICAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RpdGxlJyk7XG4gICAgICAgIHRpdGxlLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAndGl0bGUnKTtcbiAgICAgICAgdGl0bGUuc2V0QXR0cmlidXRlKCduYW1lJywgJ3RpdGxlJyk7XG4gICAgICAgIHRpdGxlLnNldEF0dHJpYnV0ZSgncmVxdWlyZWQnLCAnJyk7XG4gICAgICAgIChpc0VkaXQpID8gdGl0bGUudmFsdWUgPSBjb250cm9sbGVyLmFjdGl2ZVRhc2sudGl0bGUgOiB0aXRsZSA9IHRpdGxlO1xuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgICAgICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2Rlc2NyaXB0aW9uJyk7XG4gICAgICAgIGRlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAnZGVzY3JpcHRpb24nKTtcbiAgICAgICAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKCduYW1lJywgJ2Rlc2NyaXB0aW9uJyk7XG4gICAgICAgIGRlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZSgncm93cycsICcxMCcpO1xuICAgICAgICBkZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoJ2NvbHMnLCAnNDAnKTtcbiAgICAgICAgZGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKCdyZXF1aXJlZCcsICcnKTtcbiAgICAgICAgKGlzRWRpdCkgPyBkZXNjcmlwdGlvbi52YWx1ZSA9IGNvbnRyb2xsZXIuYWN0aXZlVGFzay5kZXNjcmlwdGlvbiA6IGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pO1xuXG4gICAgICAgIGxldCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgZGF0ZS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnZGF0ZScpO1xuICAgICAgICBkYXRlLnNldEF0dHJpYnV0ZSgnaWQnLCAnZGF0ZScpO1xuICAgICAgICBkYXRlLnNldEF0dHJpYnV0ZSgnbmFtZScsICdkYXRlJyk7XG4gICAgICAgIGRhdGUuc2V0QXR0cmlidXRlKCdyZXF1aXJlZCcsICcnKTtcbiAgICAgICAgKGlzRWRpdCkgPyBkYXRlLnZhbHVlID0gY29udHJvbGxlci5hY3RpdmVUYXNrLmRhdGUgOiBkYXRlID0gZGF0ZTtcbiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChkYXRlKTtcblxuICAgICAgICBsZXQgZm9vdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGZvb3Rlci5jbGFzc0xpc3QuYWRkKCdmb290ZXInKTtcblxuICAgICAgICBsZXQgaW1hZ2UyID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGlmIChpc0VkaXQpIHtcbiAgICAgICAgICAgIChjb250cm9sbGVyLmFjdGl2ZVRhc2sucHJpb3JpdHlTdGF0dXMpID8gaW1hZ2UyLnNyYyA9IGZ1bGxzdGFyIDogaW1hZ2UyLnNyYyA9IHN0YXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbWFnZTIuc3JjID0gc3RhcjtcbiAgICAgICAgfVxuICAgICAgICBpbWFnZTIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVQcmlvcml0eSk7XG4gICAgICAgIGZvb3Rlci5hcHBlbmRDaGlsZChpbWFnZTIpO1xuXG4gICAgICAgIGxldCBzdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgc3VibWl0LnNldEF0dHJpYnV0ZSgndHlwZScsICdzdWJtaXQnKTtcbiAgICAgICAgaWYgKCFpc0VkaXQpIHtcbiAgICAgICAgICAgIHN1Ym1pdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FkZC10YXNrJyk7XG4gICAgICAgICAgICBzdWJtaXQudGV4dENvbnRlbnQgPSAnQWRkIFRhc2snO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3VibWl0LnNldEF0dHJpYnV0ZSgnaWQnLCAnZWRpdC10YXNrJyk7XG4gICAgICAgICAgICBzdWJtaXQudGV4dENvbnRlbnQgPSAnRWRpdCBUYXNrJztcbiAgICAgICAgfVxuICAgICAgICBmb290ZXIuYXBwZW5kQ2hpbGQoc3VibWl0KTtcblxuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGZvb3Rlcik7XG5cbiAgICAgICAgb3ZlcmxheS5hcHBlbmRDaGlsZChmb3JtKTtcblxuICAgICAgICBtYWluLnByZXBlbmQob3ZlcmxheSk7XG4gICAgfTtcbiAgICBjb25zdCBkZWxldGVGb3JtID0gKCkgPT4ge1xuICAgICAgICBsZXQgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvdmVybGF5Jyk7XG4gICAgICAgIG92ZXJsYXkucmVtb3ZlKCk7XG4gICAgfTtcbiAgICBjb25zdCBhZGRUYXNrID0gKCkgPT4ge1xuICAgICAgICBsZXQgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKTtcbiAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4gPiBoMicpO1xuXG4gICAgICAgIGxldCB0YXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRhc2suc2V0QXR0cmlidXRlKCdpZCcsICd0YXNrJyk7XG4gICAgICAgIHN0b3JhZ2UuaW5ib3hbc3RvcmFnZS5pbmJveC5sZW5ndGggLSAxXS5ET01saW5rID0gdGFzaztcbiAgICAgICAgXG4gICAgICAgIGxldCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGxlZnQuY2xhc3NMaXN0LmFkZCgnbGVmdCcpO1xuICAgICAgICBcbiAgICAgICAgbGV0IGltYWdlMSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZTEuc3JjID0gY2lyY2xlO1xuICAgICAgICBpbWFnZTEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjb250cm9sbGVyLnJlbW92ZVRhc2spO1xuICAgICAgICBsZWZ0LmFwcGVuZENoaWxkKGltYWdlMSk7XG4gICAgICAgIFxuICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IHN0b3JhZ2UuaW5ib3hbc3RvcmFnZS5pbmJveC5sZW5ndGggLSAxXS50aXRsZTtcbiAgICAgICAgbGVmdC5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cbiAgICAgICAgdGFzay5hcHBlbmRDaGlsZChsZWZ0KTtcblxuICAgICAgICBsZXQgcmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcmlnaHQuY2xhc3NMaXN0LmFkZCgncmlnaHQnKTtcblxuICAgICAgICBsZXQgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2luZm8nKTtcbiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ0luZm8nO1xuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB2aWV3VGFzayk7XG4gICAgICAgIHJpZ2h0LmFwcGVuZENoaWxkKGJ1dHRvbik7XG5cbiAgICAgICAgbGV0IGltYWdlMiA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpZiAoc3RvcmFnZS5pbmJveFtzdG9yYWdlLmluYm94Lmxlbmd0aCAtIDFdLnByaW9yaXR5U3RhdHVzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaW1hZ2UyLnNyYyA9IHN0YXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbWFnZTIuc3JjID0gZnVsbHN0YXI7XG4gICAgICAgIH1cbiAgICAgICAgaW1hZ2UyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY29udHJvbGxlci50b2dnbGVQcmlvcml0eSk7XG4gICAgICAgIHJpZ2h0LmFwcGVuZENoaWxkKGltYWdlMik7XG5cbiAgICAgICAgbGV0IGltYWdlMyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZTMuc3JjID0gZWRpdDtcbiAgICAgICAgaW1hZ2UzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVuZGVyVGFza0Zvcm0pO1xuICAgICAgICByaWdodC5hcHBlbmRDaGlsZChpbWFnZTMpO1xuXG4gICAgICAgIGxldCBpbWFnZTQgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1hZ2U0LnNyYyA9IHJlbW92ZTtcbiAgICAgICAgaW1hZ2U0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY29udHJvbGxlci5yZW1vdmVUYXNrKTtcbiAgICAgICAgcmlnaHQuYXBwZW5kQ2hpbGQoaW1hZ2U0KTtcblxuICAgICAgICB0YXNrLmFwcGVuZENoaWxkKHJpZ2h0KTtcblxuICAgICAgICBoZWFkZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGFzaywgaGVhZGVyLm5leHRTaWJsaW5nKTtcbiAgICB9O1xuXG4gICAgY29uc3Qgdmlld1Rhc2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRhc2sgPSBjb250cm9sbGVyLmxpbmtUYXNrKGV2ZW50KTtcblxuICAgICAgICBsZXQgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIG92ZXJsYXkuc2V0QXR0cmlidXRlKCdpZCcsICdvdmVybGF5Jyk7XG5cbiAgICAgICAgbGV0IHZpZXdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdmlld0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3ZpZXctdGFzaycpO1xuICAgIFxuICAgICAgICBsZXQgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdoZWFkZXInKTtcblxuICAgICAgICBsZXQgaGVhZGVyMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgICAgIGhlYWRlcjIudGV4dENvbnRlbnQgPSBgJHt0YXNrLnRpdGxlfWA7XG4gICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChoZWFkZXIyKTtcblxuICAgICAgICBsZXQgaW1hZ2UxID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlMS5zcmMgPSByZW1vdmU7XG4gICAgICAgIGltYWdlMS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZUZvcm0pO1xuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoaW1hZ2UxKTtcblxuICAgICAgICB2aWV3Q29udGFpbmVyLmFwcGVuZENoaWxkKGhlYWRlcik7XG5cbiAgICAgICAgbGV0IGRldGFpbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGRldGFpbHMudGV4dENvbnRlbnQgPSBgJHt0YXNrLmRlc2NyaXB0aW9ufWA7XG4gICAgICAgIHZpZXdDb250YWluZXIuYXBwZW5kQ2hpbGQoZGV0YWlscyk7XG5cbiAgICAgICAgbGV0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGRhdGUudGV4dENvbnRlbnQgPSBgJHt0YXNrLmRhdGV9YDtcbiAgICAgICAgdmlld0NvbnRhaW5lci5hcHBlbmRDaGlsZChkYXRlKTtcblxuICAgICAgICBsZXQgcHJpb3JpdHkgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgKHRhc2sucHJpb3JpdHlTdGF0dXMpID8gcHJpb3JpdHkuc3JjID0gZnVsbHN0YXIgOiBwcmlvcml0eS5zcmMgPSBzdGFyO1xuICAgICAgICB2aWV3Q29udGFpbmVyLmFwcGVuZENoaWxkKHByaW9yaXR5KTtcblxuICAgICAgICBvdmVybGF5LmFwcGVuZENoaWxkKHZpZXdDb250YWluZXIpO1xuXG4gICAgICAgIG1haW4ucHJlcGVuZChvdmVybGF5KTtcbiAgICB9O1xuXG4gICAgY29uc3QgZWRpdFRhc2sgPSAoKSA9PiB7XG4gICAgICAgIGxldCBoZWFkZXIgPSBjb250cm9sbGVyLmFjdGl2ZVRhc2suRE9NbGluay5jaGlsZHJlblswXS5jaGlsZHJlblsxXTtcbiAgICAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gY29udHJvbGxlci5hY3RpdmVUYXNrLnRpdGxlO1xuXG4gICAgICAgIGxldCBwYXJlbnROb2RlID0gY29udHJvbGxlci5hY3RpdmVUYXNrLkRPTWxpbmsuY2hpbGRyZW5bMV07XG5cbiAgICAgICAgbGV0IG9sZFByaW9yaXR5ID0gY29udHJvbGxlci5hY3RpdmVUYXNrLkRPTWxpbmsuY2hpbGRyZW5bMV0uY2hpbGRyZW5bMV07XG5cbiAgICAgICAgbGV0IG5ld1ByaW9yaXR5ID0gbmV3IEltYWdlKCk7XG4gICAgICAgIChjb250cm9sbGVyLmFjdGl2ZVRhc2sucHJpb3JpdHlTdGF0dXMgPT09IHRydWUpID8gbmV3UHJpb3JpdHkuc3JjID0gZnVsbHN0YXIgOiBuZXdQcmlvcml0eS5zcmMgPSBzdGFyO1xuICAgICAgICBuZXdQcmlvcml0eS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbnRyb2xsZXIudG9nZ2xlUHJpb3JpdHkpO1xuICAgICAgICBwYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdQcmlvcml0eSwgb2xkUHJpb3JpdHkpO1xuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlVGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgcmVtb3ZhbCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICAgIHJlbW92YWwucmVtb3ZlKCk7XG4gICAgfTtcblxuICAgIGNvbnN0IHRvZ2dsZVByaW9yaXR5ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBvbGRFbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBsZXQgbmV3RWxlbWVudCA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpZiAob2xkRWxlbWVudC5zcmMgPT09IHN0YXIpIHtcbiAgICAgICAgICAgIG5ld0VsZW1lbnQuc3JjID0gZnVsbHN0YXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXdFbGVtZW50LnNyYyA9IHN0YXI7XG4gICAgICAgIH1cbiAgICAgICAgbmV3RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbnRyb2xsZXIudG9nZ2xlUHJpb3JpdHkpO1xuICAgICAgICBldmVudC50YXJnZXQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3RWxlbWVudCwgb2xkRWxlbWVudCk7XG4gICAgfTtcblxuICAgIHJldHVybiB7cmVuZGVyUGFnZSwgcmVuZGVyVGFza0Zvcm0sIHJlbmRlclByb2plY3RGb3JtLCBkZWxldGVGb3JtLCBhZGRQcm9qZWN0LCByZW1vdmVQcm9qZWN0LCBhZGRUYXNrLCBlZGl0VGFzaywgcmVtb3ZlVGFzaywgdG9nZ2xlUHJpb3JpdHl9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgRE9NOyIsImltcG9ydCBjb250cm9sbGVyIGZyb20gJy4uL2luZGV4LmpzJztcbmltcG9ydCBzdG9yYWdlIGZyb20gJy4vc3RvcmFnZS5qcyc7XG5pbXBvcnQgdGFza0ZhY3RvcnkgZnJvbSAnLi90YXNrLmpzJztcbmltcG9ydCBET00gZnJvbSAnLi9ET00uanMnO1xuXG4vLyBNZWRpYSBJbXBvcnRzXG5pbXBvcnQgc3RhciBmcm9tICcuLi8uLi9kaXN0L21lZGlhL3N0YXIucG5nJztcbmltcG9ydCBmdWxsc3RhciBmcm9tICcuLi8uLi9kaXN0L21lZGlhL2Z1bGxzdGFyLnBuZyc7XG5cbmNvbnN0IGFwcGxpY2F0aW9uID0gKCgpID0+IHtcbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gKCkgPT4ge1xuXG4gICAgfTtcbiAgICBjb25zdCBhZGRMb2NhdGlvbiA9ICgpID0+IHtcblxuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlUHJvamVjdCA9ICgpID0+IHtcblxuICAgIH07XG4gICAgY29uc3QgYWRkVGFzayA9ICgpID0+IHtcbiAgICAgICAgbGV0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpdGxlJykudmFsdWU7XG4gICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZXNjcmlwdGlvbicpLnZhbHVlO1xuICAgICAgICBsZXQgZGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXRlJykudmFsdWU7XG4gICAgICAgIGxldCBpc1ByaW9yaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvb3RlciA+IGltZycpO1xuICAgICAgICBpZiAoaXNQcmlvcml0eS5zcmMgPT09IHN0YXIpIHtcbiAgICAgICAgICAgIGlzUHJpb3JpdHkgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlzUHJpb3JpdHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHN0b3JhZ2UuaW5ib3hbc3RvcmFnZS5pbmJveC5sZW5ndGhdID0gdGFza0ZhY3RvcnkodGl0bGUsIGRlc2NyaXB0aW9uLCBkYXRlLCBpc1ByaW9yaXR5KTtcbiAgICB9O1xuICAgIGNvbnN0IGVkaXRUYXNrID0gKCkgPT4ge1xuICAgICAgICBjb250cm9sbGVyLmFjdGl2ZVRhc2sudGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGl0bGUnKS52YWx1ZTtcbiAgICAgICAgY29udHJvbGxlci5hY3RpdmVUYXNrLmRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Rlc2NyaXB0aW9uJykudmFsdWU7XG4gICAgICAgIGNvbnRyb2xsZXIuYWN0aXZlVGFzay5kYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RhdGUnKS52YWx1ZTtcbiAgICAgICAgbGV0IHByaW9yaXR5U3RhdHVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvb3RlciA+IGltZycpO1xuICAgICAgICAocHJpb3JpdHlTdGF0dXMuc3JjID09PSBzdGFyKSA/IGNvbnRyb2xsZXIuYWN0aXZlVGFzay5wcmlvcml0eVN0YXR1cyA9IGZhbHNlIDogY29udHJvbGxlci5hY3RpdmVUYXNrLnByaW9yaXR5U3RhdHVzID0gdHJ1ZTtcbiAgICB9O1xuICAgIGNvbnN0IHJlbW92ZVRhc2sgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdG9yYWdlLmluYm94Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAoc3RvcmFnZS5pbmJveFtpXS5ET01saW5rID09PSBldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgc3RvcmFnZS5pbmJveC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVByaW9yaXR5ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0YXNrID0gY29udHJvbGxlci5saW5rVGFzayhldmVudCk7XG4gICAgICAgICh0YXNrLnByaW9yaXR5U3RhdHVzKSA/IHRhc2sucHJpb3JpdHlTdGF0dXMgPSBmYWxzZSA6IHRhc2sucHJpb3JpdHlTdGF0dXMgPSB0cnVlO1xuICAgIH07XG5cbiAgICByZXR1cm4ge2FkZFByb2plY3QsIGFkZExvY2F0aW9uLCByZW1vdmVQcm9qZWN0LCBhZGRUYXNrLCBlZGl0VGFzaywgcmVtb3ZlVGFzaywgdG9nZ2xlUHJpb3JpdHl9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgYXBwbGljYXRpb247IiwiY29uc3QgdGFza0ZhY3RvcnkgPSAodGl0bGUsIGRlc2NyaXB0aW9uLCBkYXRlLCBpc1ByaW9yaXR5KSA9PiB7XG4gICAgbGV0IERPTWxpbms7XG4gICAgcmV0dXJuIHt0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5U3RhdHVzOiBpc1ByaW9yaXR5LCBET01saW5rfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRhc2tGYWN0b3J5OyIsImltcG9ydCBET00gZnJvbSAnLi9tb2R1bGVzL0RPTS5qcyc7XG5pbXBvcnQgc3RvcmFnZSBmcm9tICcuL21vZHVsZXMvc3RvcmFnZS5qcydcbmltcG9ydCBhcHBsaWNhdGlvbiBmcm9tICcuL21vZHVsZXMvYXBwbGljYXRpb24uanMnO1xuaW1wb3J0IHRhc2tGYWN0b3J5IGZyb20gJy4vbW9kdWxlcy90YXNrLmpzJztcblxuY29uc3QgY29udHJvbGxlciA9ICgoKSA9PiB7XG4gICAgbGV0IGFjdGl2ZVRhc2s7XG4gICAgY29uc3QgYWRkUHJvamVjdCA9ICgpID0+IHtcblxuICAgIH07XG4gICAgY29uc3QgcmVtb3ZlUHJvamVjdCA9ICgpID0+IHtcblxuICAgIH07XG4gICAgY29uc3QgYWRkVGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhcHBsaWNhdGlvbi5hZGRUYXNrKCk7XG4gICAgICAgIERPTS5hZGRUYXNrKCk7XG4gICAgICAgIERPTS5kZWxldGVGb3JtKCk7XG4gICAgfTtcbiAgICBjb25zdCBlZGl0VGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhcHBsaWNhdGlvbi5lZGl0VGFzaygpO1xuICAgICAgICBET00uZWRpdFRhc2soKTtcbiAgICAgICAgRE9NLmRlbGV0ZUZvcm0oKTsgXG4gICAgfTtcbiAgICBjb25zdCByZW1vdmVUYXNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGFwcGxpY2F0aW9uLnJlbW92ZVRhc2soZXZlbnQpO1xuICAgICAgICBET00ucmVtb3ZlVGFzayhldmVudCk7XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVQcmlvcml0eSA9IChldmVudCkgPT4ge1xuICAgICAgICBhcHBsaWNhdGlvbi50b2dnbGVQcmlvcml0eShldmVudCk7XG4gICAgICAgIERPTS50b2dnbGVQcmlvcml0eShldmVudCk7XG4gICAgfTtcbiAgICBjb25zdCBpc0VkaXRPckFkZCA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybSBidXR0b24nKTtcbiAgICAgICAgaWYgKGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdhZGQtdGFzaycpIHtcbiAgICAgICAgICAgIGFkZFRhc2soZXZlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWRpdFRhc2soZXZlbnQpO1xuICAgICAgICB9XG4gICAgfSBcbiAgICBjb25zdCBsaW5rVGFzayA9IChldmVudCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0b3JhZ2UuaW5ib3gubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChzdG9yYWdlLmluYm94W2ldLkRPTWxpbmsgPT09IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmFnZS5pbmJveFtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBFdmVudCBMaXN0ZW5lcnNcbiAgICBjb25zdCBhZGRUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZC10YXNrLWZvcm0nKTtcbiAgICBhZGRUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgRE9NLnJlbmRlclRhc2tGb3JtKTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGlzRWRpdE9yQWRkKTtcblxuICAgIHJldHVybiB7YWN0aXZlVGFzaywgYWRkUHJvamVjdCwgcmVtb3ZlUHJvamVjdCwgbGlua1Rhc2ssIGVkaXRUYXNrLCByZW1vdmVUYXNrLCB0b2dnbGVQcmlvcml0eX07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBjb250cm9sbGVyOyJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImxlbmd0aCIsIkVycm9yIiwicmVwbGFjZSIsInAiLCJpbmJveCIsInRvZGF5IiwicHJvamVjdHMiLCJET00iLCJyZW5kZXJUYXNrRm9ybSIsImV2ZW50IiwiaXNFZGl0IiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwicGFyZW50Tm9kZSIsIm1haW4iLCJxdWVyeVNlbGVjdG9yIiwib3ZlcmxheSIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJmb3JtIiwiaGVhZGVyIiwiY2xhc3NMaXN0IiwiYWRkIiwiaGVhZGVyMiIsInRleHRDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJpbWFnZTEiLCJJbWFnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZWxldGVGb3JtIiwidGl0bGUiLCJ2YWx1ZSIsImRlc2NyaXB0aW9uIiwiZGF0ZSIsImZvb3RlciIsImltYWdlMiIsInRvZ2dsZVByaW9yaXR5Iiwic3VibWl0IiwicHJlcGVuZCIsInJlbW92ZSIsInZpZXdUYXNrIiwidGFzayIsInZpZXdDb250YWluZXIiLCJkZXRhaWxzIiwicHJpb3JpdHkiLCJvbGRFbGVtZW50IiwibmV3RWxlbWVudCIsInJlcGxhY2VDaGlsZCIsInJlbmRlclBhZ2UiLCJyZW5kZXJQcm9qZWN0Rm9ybSIsImFkZFByb2plY3QiLCJyZW1vdmVQcm9qZWN0IiwiYWRkVGFzayIsIkRPTWxpbmsiLCJsZWZ0IiwicmlnaHQiLCJidXR0b24iLCJwcmlvcml0eVN0YXR1cyIsImltYWdlMyIsImltYWdlNCIsImluc2VydEJlZm9yZSIsIm5leHRTaWJsaW5nIiwiZWRpdFRhc2siLCJvbGRQcmlvcml0eSIsIm5ld1ByaW9yaXR5IiwicmVtb3ZlVGFzayIsImlzUHJpb3JpdHkiLCJpIiwicHJldmVudERlZmF1bHQiLCJhY3RpdmVUYXNrIiwibGlua1Rhc2siXSwic291cmNlUm9vdCI6IiJ9